{"version":3,"sources":["webpack:///./src/components/MapPlayControls.vue?78ce","webpack:///./src/views/Output.vue?f364","webpack:///./src/components/MapPlayControls.vue?d1b7","webpack:///src/components/MapPlayControls.vue","webpack:///./src/components/MapPlayControls.vue?2d3f","webpack:///./src/components/MapPlayControls.vue?96c5","webpack:///src/views/Output.vue","webpack:///./src/views/Output.vue?89e5","webpack:///./src/views/Output.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","staticClass","attrs","on","togglePlay","playPauseIcon","_b","ref","hasLabel","stepToTime","scopedSlots","_u","key","fn","active","value","class","_v","_s","model","callback","$$v","timeStep","expression","sliderConfig","name","components","props","data","playing","fps","fpsInterval","lastFrame","computed","labelStep","sm","md","lg","width","visibleStep","min","max","maxSteps","get","set","minutes","$store","dispatch","val","methods","stepFrames","elapsed","now","requestAnimationFrame","interval","$mq","notTooClose","component","maplayer","Map","slider","MapPlayControls","spinner","MapLoadSpinner"],"mappings":"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","file":"js/output.e58a2878.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPlayControls.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPlayControls.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('maplayer'),_c('slider'),_c('spinner')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"time-slider-overlay\"},[_c('div',{staticClass:\"time-slider-overlay-inner\"},[_c('b-row',[_c('b-col',{staticClass:\"pt-2 time-slider-controls\"},[_c('button',{staticClass:\"btn btn-outline-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.togglePlay}},[_c('FontAwesomeIcon',{attrs:{\"icon\":_vm.playPauseIcon,\"size\":\"lg\"}})],1)]),_c('b-col',{attrs:{\"cols\":\"11\"}},[_c('vue-slider',_vm._b({ref:\"playcontrols\",attrs:{\"marks\":_vm.hasLabel,\"tooltip\":'always',\"tooltip-formatter\":_vm.stepToTime,\"use-keyboard\":true},scopedSlots:_vm._u([{key:\"label\",fn:function(ref){\nvar active = ref.active;\nvar value = ref.value;\nreturn [_c('div',{class:['vue-slider-mark-label', 'custom-label', { active: active }]},[_vm._v(\"\\n              \"+_vm._s(_vm.stepToTime(value))+\"\\n            \")])]}}]),model:{value:(_vm.timeStep),callback:function ($$v) {_vm.timeStep=$$v},expression:\"timeStep\"}},'vue-slider',_vm.sliderConfig,false))],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"time-slider-overlay\">\n    <div class=\"time-slider-overlay-inner\">\n      <b-row>\n        <b-col class=\"pt-2 time-slider-controls\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-secondary\"\n            v-on:click=\"togglePlay\"\n          >\n            <FontAwesomeIcon :icon=\"playPauseIcon\" size=\"lg\" />\n          </button>\n        </b-col>\n        <b-col cols=\"11\">\n          <vue-slider\n            ref=\"playcontrols\"\n            v-bind=\"sliderConfig\"\n            v-model=\"timeStep\"\n            :marks=\"hasLabel\"\n            :tooltip=\"'always'\"\n            :tooltip-formatter=\"stepToTime\"\n            :use-keyboard=\"true\"\n          >\n            <template v-slot:label=\"{ active, value }\">\n              <div\n                :class=\"['vue-slider-mark-label', 'custom-label', { active }]\"\n              >\n                {{ stepToTime(value) }}\n              </div>\n            </template>\n          </vue-slider>\n        </b-col>\n      </b-row>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faPlay, faPause } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nlibrary.add(faPlay, faPause);\n\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"mapPlayControls\",\n  components: { VueSlider, FontAwesomeIcon },\n  props: {},\n  data: () => {\n    const fps = 6;\n    return {\n      playing: false,\n      fps: fps,\n      fpsInterval: 1000 / fps,\n      lastFrame: 0\n    };\n  },\n  computed: {\n    playPauseIcon() {\n      if (this.playing) return \"pause\";\n      else return \"play\";\n    },\n    labelStep() {\n      return {\n        sm: ((60 * 60) / this.stepSeconds) * 6,\n        md: ((60 * 60) / this.stepSeconds) * 4,\n        lg: (60 * 60) / this.stepSeconds\n      };\n    },\n    ...mapState({\n      stepSeconds: state => state.output.stepSeconds,\n      visibleStep: state => state.output.visibleStep,\n      fireStepMinutes: state => state.fire.stepMinutes // rest of system is on minute steps\n    }),\n    sliderConfig() {\n      return {\n        width: \"98%\",\n        value: this.visibleStep ? this.visibleStep : 0,\n        min: 0,\n        max: this.maxSteps\n      };\n    },\n    timeStep: {\n      get() {\n        return this.visibleStep;\n      },\n      set(val) {\n        var minutes = (val * this.stepSeconds) / 60;\n        this.$store.dispatch(\n          \"filter\",\n          parseInt(minutes / this.fireStepMinutes)\n        );\n        this.$store.dispatch(\"filterSeconds\", val);\n      }\n    },\n    maxSteps() {\n      return (24 * 60 * 60) / this.stepSeconds;\n    }\n  },\n  methods: {\n    togglePlay() {\n      // if we are sitting at the last fram and play is pressed,\n      // we may as well play from the beginning\n      if (this.visibleStep == this.maxSteps) this.$store.dispatch(\"filter\", 0);\n      if (this.visibleStep == this.maxSteps)\n        this.$store.dispatch(\"filterSeconds\", 0);\n\n      this.playing = !this.playing;\n      this.stepFrames();\n    },\n    stepFrames() {\n      if (!this.playing) return;\n\n      if (this.visibleStep >= this.maxSteps) {\n        this.playing = false;\n        return;\n      }\n\n      const now = Date.now();\n      const elapsed = now - this.lastFrame;\n      if (elapsed > this.fpsInterval) {\n        var minutes = ((this.visibleStep + 1) * this.stepSeconds) / 60;\n        this.$store.dispatch(\n          \"filter\",\n          parseInt(minutes / this.fireStepMinutes)\n        ); // the rest of the system does not use second steps\n        this.$store.dispatch(\"filterSeconds\", this.visibleStep + 1);\n        this.lastFrame = now;\n      }\n      requestAnimationFrame(this.stepFrames);\n    },\n    hasLabel(timeStep) {\n      var interval = this.labelStep[this.$mq];\n      var notTooClose = timeStep < this.maxSteps - interval + 1;\n      return (\n        (timeStep % interval === 0 && notTooClose) ||\n        timeStep === this.maxSteps - 1\n      );\n    },\n    stepToTime(timeStep) {\n      return (\n        Math.floor((timeStep * this.stepSeconds) / (60 * 60)).toString() +\n        \":\" +\n        (parseInt((timeStep * this.stepSeconds) / 60) % 60)\n          .toString()\n          .padStart(2, \"0\")\n      );\n    }\n  }\n};\n</script>\n\n<style>\n.time-slider-overlay {\n  position: absolute;\n  width: 88%;\n  bottom: 2.5%;\n  right: 0;\n  height: auto;\n  overflow: visible;\n  padding: 0 0 0 0;\n  margin: 0 0 0 0;\n  z-index: 100;\n}\n\n.time-slider-overlay .time-slider-overlay-inner {\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  padding: 0 1em 1.5em 2em;\n  margin-bottom: 10px;\n  overflow: visible;\n}\n.vue-slider-process {\n  background-color: rgb(16, 102, 253);\n}\n.vue-slider-dot-tooltip-inner {\n  background-color: rgb(16, 102, 253);\n}\n.vue-slider-dot-tooltip-inner:after {\n  border-top-color: rgb(16, 102, 253);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPlayControls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapPlayControls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapPlayControls.vue?vue&type=template&id=035a67c8&\"\nimport script from \"./MapPlayControls.vue?vue&type=script&lang=js&\"\nexport * from \"./MapPlayControls.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapPlayControls.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <maplayer />\n    <slider />\n    <spinner />\n  </div>\n</template>\n\n<script>\nimport MapComponent from \"@/components/Map.vue\";\nimport MapPlayControls from \"@/components/MapPlayControls.vue\";\nimport MapLoadSpinner from \"@/components/MapLoadSpinner.vue\";\n\nexport default {\n  name: \"home\",\n  components: {\n    maplayer: MapComponent,\n    slider: MapPlayControls,\n    spinner: MapLoadSpinner\n  },\n  methods: {}\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Output.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Output.vue?vue&type=template&id=2d4fc906&\"\nimport script from \"./Output.vue?vue&type=script&lang=js&\"\nexport * from \"./Output.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}