(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],a[o]&&d.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function s(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"98dd71f7"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"7f34a472"}[e]+".css",o=l.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var s=a[i],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===r||c===o))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){s=u[i],c=s.getAttribute("data-href");if(c===r||c===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,n(a)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[e]=0}));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=i);var c,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(e),c=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,u.appendChild(d)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/ees-ui/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2856:function(e,t,n){},5630:function(e,t,n){"use strict";var r=n("e3c5"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n    "),n("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),n("router-view",{staticClass:"router-view"})],1)},a=[],i=(n("5c0b"),n("2877")),s={},l=Object(i["a"])(s,o,a,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggleSettings()}}},[n("maplayer"),n("settings")],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mapbox",{attrs:{"access-token":e.mapboxAccessToken,"map-options":e.mapOpts,"geolocate-control":{show:!0,position:"top-left"},"scale-control":{show:!0,position:"bottom-left"},"fullscreen-control":{show:!0,position:"top-left"}},on:{"map-load":e.storeMapInstance}})},f=[],g=n("c93e"),y=n("7be2"),h=n.n(y),v=n("e192"),b=n.n(v),S=n("2f62"),_=(n("7514"),{mapboxAccessToken:"pk.eyJ1IjoiZGhpeHNpbmdoIiwiYSI6ImNqbWx4OTR0ZzBkMWUzb255and1aTUweGkifQ.U0vPiwyfM4ad7axC_4dkHg",styles:[{id:"basic",name:"Basic"},{id:"bright",name:"Bright"},{id:"dark",name:"Dark"},{id:"light",name:"Light"},{id:"satellite",name:"Satellite"},{id:"streets",name:"Streets"}],regions:[{id:"Mount_Alexander_Shire",name:"Mount Alexander Shire",center:[144.212304,-37.064737],matsimNetworkLayer:"mount_alexander_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/mount-alexander-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"20160420_MtAlexShire_FDI50_Iso",name:"20160420 Maldon FFDI50 ISO",description:"Forest Fire Danger Index (FFDI) 50 with south west wind change; based on 11:00 point fire ignition and running until 18:00",geojson:"https://raw.githubusercontent.com/agentsoz/ees/72222359e6418bf491b8176ab47586dcbd551bc5/scenarios/mount-alexander-shire/app-data/maldon/20160420_MtAlexShire_FDI50_Iso.json"},{id:"20160420_MtAlexShire_FDI75_Iso",name:"20160420 Maldon FFDI75 ISO",description:"Forest Fire Danger Index (FFDI) 75 with south west wind change; based on 11:00 point fire ignition and running until 18:00",geojson:"https://raw.githubusercontent.com/agentsoz/ees/72222359e6418bf491b8176ab47586dcbd551bc5/scenarios/mount-alexander-shire/app-data/maldon/20160420_MtAlexShire_FDI75_Iso.json"}]},{id:"Surf_Coast_Shire",name:"Surf Coast Shire",center:[144.326271,-38.332386],matsimNetworkLayer:"surf_coast_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/surf-coast-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84",name:"Anglesea_FFDI104 PHX5 2016 MINSUP FH2017 GRID",description:"12:00 point fire ignition",geojson:"https://raw.githubusercontent.com/agentsoz/ees/f25dd3427060180f08716c25198d5b6e0e530fd9/scenarios/surf-coast-shire/data/phoenix/Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84.json"}]}]}),x={mapboxAccessToken:function(e){return e.mapboxAccessToken},styles:function(e){return e.styles},regions:function(e){return e.regions},region:function(e){return function(t){return e.regions.find(function(e){return e.id===t})}},firesInRegion:function(e,t){return function(e){var n=t.region(e);return n.phoenixRuns}}},M={setMapboxStyle:function(e,t){e.mapboxStyle=t,e.map.instance.setStyle("mapbox://styles/mapbox/"+e.mapboxStyle+"-v9"),e.reloadOverlayLayersOnStyleData=!0},setMapSettingsIsOpen:function(e,t){e.mapSettingsIsOpen=t},setReloadOverlayLayersOnStyleData:function(e,t){e.reloadOverlayLayersOnStyleData=t},setSelectedRegion:function(e,t){e.selectedRegion=t},setSelectedFire:function(e,t){e.selectedFire=t}},I={},w={state:_,getters:x,mutations:M,actions:I},k=(n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),{mapboxStyle:"dark",mapSettingsIsOpen:!1,baseMATSimLayer:null,loadedMATSimLayers:[],loadedMATSimSource:null,selectedRegion:null,selectedFire:null,reloadOverlayLayersOnStyleData:!1,mapInstance:null,mapCenter:[144.968447,-37.818232]}),T={mapOpts:function(e){var t={style:"mapbox://styles/mapbox/"+e.mapboxStyle+"-v9",center:e.mapCenter,minZoom:0,zoom:6,maxZoom:14};return t},mapInstance:function(e){return e.mapInstance},mapboxStyle:function(e){return e.mapboxStyle},mapCenter:function(e){return e.mapCenter},mapSettingsIsOpen:function(e){return e.mapSettingsIsOpen},baseMATSimLayer:function(e){return e.baseMATSimLayer},loadedMATSimLayers:function(e){return e.loadedMATSimLayers},loadedMATSimSource:function(e){return e.loadedMATSimSource},selectedRegion:function(e){return e.selectedRegion},selectedFire:function(e){return e.selectedFire},reloadOverlayLayersOnStyleData:function(e){return e.reloadOverlayLayersOnStyleData},firesInSelectedRegion:function(e,t,n,r){return e.selectedRegion?r.firesInRegion(e.selectedRegion):null},selectedFireData:function(e,t){var n=t.firesInSelectedRegion;if(!n)return null;var r=n.find(function(t){return t.id===e.selectedFire});return r}},A={setMapInstance:function(e,t){e.mapInstance=t},setMapboxStyle:function(e,t){e.mapboxStyle=t,e.mapInstance.setStyle("mapbox://styles/mapbox/"+e.mapboxStyle+"-v9"),e.reloadOverlayLayersOnStyleData=!0},setMapSettingsIsOpen:function(e,t){e.mapSettingsIsOpen=t},setReloadOverlayLayersOnStyleData:function(e,t){e.reloadOverlayLayersOnStyleData=t},setSelectedRegion:function(e,t){e.selectedRegion=t},setBaseMATSimLayer:function(e,t){e.baseMATSimLayer=t},addMATSimLayer:function(e,t){e.loadedMATSimLayers.push(t)},loadedMATSimSource:function(e,t){e.loadedMATSimSource=t},clearMATSimLayers:function(e){e.baseMATSimLayer=null,e.loadedMATSimLayers=[]},setSelectedFire:function(e,t){e.selectedFire=t}},O={loadMATSimRegion:function(e){var t=e.dispatch,n=e.getters;t("removeMATSimLayers"),t("loadLayers"),t("flyTo",n.region(n.selectedRegion).center)},removeMATSimLayers:function(e){var t=e.commit,n=e.getters,r=n.mapInstance,o=n.loadedMATSimLayers,a=!0,i=!1,s=void 0;try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;try{r.removeLayer(u)}catch(e){}}}catch(e){i=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}t("clearMATSimLayers"),n.loadedMATSimSource&&(r.removeSource("statictest"),t("loadedMATSimSource",null))},loadLayers:function(e){var t=e.dispatch,n=e.commit,r=e.getters,o=e.rootGetters,a=o.region(r.selectedRegion),i=a.matsimNetworkLayer;t("addMATSimNetworkSource",{name:"statictest",pbfurl:a.matsimNetworkTiles}),n("setBaseMATSimLayer",i),t("addMATSimNetworkLayer",i);var s=r.selectedFireData;s&&t("setFireLayer",s.geojson)},flyTo:function(e,t){var n=e.getters;n.mapInstance.flyTo({center:t,zoom:8,bearing:0,speed:.5,curve:1,easing:function(e){return e}})},setFireLayer:function(e,t){var n=e.getters,r=n.mapInstance,o="phoenix-layer",a=r.getLayer(o);if("undefined"==typeof a){for(var i,s=r.getStyle().layers,l=0;l<s.length;l++)if("symbol"===s[l].type){i=s[l].id;break}r.addLayer({id:o,type:"line",source:{type:"geojson",data:t},layout:{},paint:{"line-color":"#f00","line-opacity":.4,"line-width":2}},i)}else r.getSource(o).setData(t)},addMATSimNetworkSource:function(e,t){var n=e.commit,r=e.getters;r.mapInstance.addSource(t.name,{type:"vector",tiles:[t.pbfurl],minzoom:0,maxzoom:14}),n("loadedMATSimSource",t.name)},addMATSimNetworkLayer:function(e,t){for(var n,r=e.commit,o=e.getters,a=o.mapInstance,i=a.getStyle().layers,s=0;s<i.length;s++)if("symbol"===i[s].type){n=i[s].id;break}a.addLayer({id:t,type:"line",source:"statictest","source-layer":t,minzoom:0,maxzoom:22,paint:{"line-color":"#7777ff","line-width":.5}},n),r("addMATSimLayer",t),a.addLayer({id:t+"-highlighted",type:"line",source:"statictest","source-layer":t,minzoom:0,maxzoom:22,paint:{"line-color":"#FF8C00","line-width":1.5},filter:["in","ID",""]},n),r("addMATSimLayer",t+"-highlighted")}},L={state:k,getters:T,mutations:A,actions:O};r["a"].use(S["a"]);var F=new S["a"].Store({modules:{config:w,map:L}}),R={name:"maplayer",computed:Object(g["a"])({},Object(S["b"])(["mapInstance","mapOpts","mapboxAccessToken","baseMATSimLayer"])),components:{mapbox:h.a},methods:{storeMapInstance:function(e){e.on("click",this.mapOnClick),F.commit("setMapInstance",e)},mapOnClick:function(e){var t=[[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]],n=this.mapInstance.queryRenderedFeatures(t,{layers:[this.baseMATSimLayer]});if(n){var r=n[0].geometry.coordinates.slice()[0][0],o=n[0].properties.ID;(new b.a.Popup).setLngLat(r).setHTML("Link "+o).addTo(this.mapInstance);var a=n.reduce(function(e,t){return e.push(t.properties.ID),e},["in","ID"]);this.mapInstance.setFilter(this.baseMATSimLayer+"-highlighted",a)}}}},D=R,j=(n("78f4"),Object(i["a"])(D,m,f,!1,null,"3c6bb370",null));j.options.__file="Map.vue";var C=j.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-settings-container",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()}}},[n("div",{staticClass:"map-settings-button-container mapboxgl-ctrl-top-right"},[n("div",{staticClass:"mapboxgl-ctrl mapboxgl-ctrl-group"},[n("button",{staticClass:"icon sprocket",attrs:{type:"button"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()},click:function(t){e.toggle()}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"map-overlay"},[n("div",{staticClass:"map-settings-panel",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()}}},[n("label",{attrs:{for:"map-style"}},[e._v("Map style:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.mapboxStyle,expression:"mapboxStyle"}],attrs:{id:"map-style"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.mapboxStyle=t.target.multiple?n:n[0]}}},e._l(e.styles,function(t){return n("option",{key:t.id,attrs:{disabled:e.mapboxStyle==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})),n("label",{attrs:{for:"map-region"}},[e._v("Region:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRegion,expression:"selectedRegion"}],attrs:{id:"map-region"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRegion=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"no-region",disabled:""}}),e._l(e.regions,function(t){return n("option",{key:t.id,attrs:{disabled:e.selectedRegion==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),n("label",{attrs:{for:"map-fire"}},[e._v("Phoenix Fire:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFire,expression:"selectedFire"}],attrs:{id:"map-fire"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedFire=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"no-fire",disabled:""}}),e._l(e.firesInSelectedRegion,function(t){return n("option",{key:t.id,attrs:{disabled:e.selectedFire==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2)])])])},N=[],P={name:"mapSettings",props:{},data:function(){return{styles:this.$store.getters.styles,regions:this.$store.getters.regions}},computed:{isOpen:{get:function(){return this.$store.getters.mapSettingsIsOpen},set:function(e){this.$store.commit("mapSettingsIsOpen",e)}},firesInSelectedRegion:function(){return this.$store.getters.firesInSelectedRegion?this.$store.getters.firesInSelectedRegion:[]},mapboxStyle:{get:function(){return this.$store.getters.mapboxStyle},set:function(e){this.toggle(),this.$store.commit("setMapboxStyle",e)}},selectedRegion:{get:function(){return this.$store.getters.selectedRegion?this.$store.getters.selectedRegion:"no-region"},set:function(e){this.toggle(),this.$store.commit("setSelectedRegion",e),this.$store.dispatch("loadMATSimRegion")}},selectedFire:{get:function(){return this.$store.getters.selectedFire},set:function(e){this.toggle(),this.$store.commit("setSelectedFire",e);var t=this.$store.getters.selectedFireData;this.$store.dispatch("setFireLayer",t?t.geojson:"")}}},methods:{toggle:function(){this.$store.commit("setMapSettingsIsOpen",!this.$store.getters.mapSettingsIsOpen)}}},E=P,z=(n("5630"),Object(i["a"])(E,$,N,!1,null,null,null));z.options.__file="MapSettings.vue";var B=z.exports,H={name:"home",components:{maplayer:C,settings:B},methods:{toggleSettings:B.methods.toggle}},G=H,q=Object(i["a"])(G,d,p,!1,null,null,null);q.options.__file="Home.vue";var U=q.exports;r["a"].use(u["a"]);var W=new u["a"]({routes:[{path:"/",name:"home",component:U},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),Z=n("9f7b");n("f9e3"),n("2dd8");r["a"].use(Z["a"]),r["a"].config.productionTip=!1,new r["a"]({el:"#app",router:W,store:F,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("2856"),o=n.n(r);o.a},"5cd1":function(e,t,n){},"78f4":function(e,t,n){"use strict";var r=n("5cd1"),o=n.n(r);o.a},e3c5:function(e,t,n){}});
//# sourceMappingURL=app.7c8bec56.js.map