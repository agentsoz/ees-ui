(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)o=s[u],i[o]&&d.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={app:0},i={app:0},a=[];function s(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"98dd71f7"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"7f34a472"}[e]+".css",o=l.p+r,i=document.getElementsByTagName("link"),a=0;a<i.length;a++){var s=i[a],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===r||c===o))return t()}var u=document.getElementsByTagName("style");for(a=0;a<u.length;a++){s=u[a],c=s.getAttribute("data-href");if(c===r||c===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.request=r,n(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=a);var c,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(e),c=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,u.appendChild(d)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/ees-ui/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2856:function(e,t,n){},5630:function(e,t,n){"use strict";var r=n("e3c5"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n    "),n("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),n("router-view",{staticClass:"router-view"})],1)},i=[],a=(n("5c0b"),n("2877")),s={},l=Object(a["a"])(s,o,i,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggleSettings()}}},[n("maplayer"),n("settings")],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mapbox",{attrs:{"access-token":"pk.eyJ1IjoiZGhpeHNpbmdoIiwiYSI6ImNqbWx4OTR0ZzBkMWUzb255and1aTUweGkifQ.U0vPiwyfM4ad7axC_4dkHg","map-options":e.opts,"geolocate-control":{show:!0,position:"top-left"},"scale-control":{show:!0,position:"bottom-left"},"fullscreen-control":{show:!0,position:"top-left"}},on:{"map-load":e.loadLayers}})},f=[],g=(n("7514"),n("2f62"));r["a"].use(g["a"]);var y=new g["a"].Store({state:{mapboxStyle:"dark",mapCenter:[144.068722,-36.997609],mapSettingsIsOpen:!1,selectedRegion:null,selectedFire:null,reloadOverlayLayersOnStyleData:!1,fireGeoJson:"https://raw.githubusercontent.com/agentsoz/ees/master/scenarios/mount-alexander-shire/maldon-100-with-emergency-vehicles/scenario_fire.json",map:{instance:null,center:[144.968447,-37.818232],styles:[{id:"basic",name:"Basic"},{id:"bright",name:"Bright"},{id:"dark",name:"Dark"},{id:"light",name:"Light"},{id:"satellite",name:"Satellite"},{id:"streets",name:"Streets"}]},regions:[{id:"Mount_Alexander_Shire",name:"Mount Alexander Shire",center:[144.212304,-37.064737],matsimNetworkLayer:"mount_alexander_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/mount-alexander-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"20160420_MtAlexShire_FDI50_Iso",name:"20160420 Maldon FFDI50 ISO",description:"Forest Fire Danger Index (FFDI) 50 with south west wind change; based on 11:00 point fire ignition and running until 18:00",geojson:"https://raw.githubusercontent.com/agentsoz/ees/72222359e6418bf491b8176ab47586dcbd551bc5/scenarios/mount-alexander-shire/app-data/maldon/20160420_MtAlexShire_FDI50_Iso.json"},{id:"20160420_MtAlexShire_FDI75_Iso",name:"20160420 Maldon FFDI75 ISO",description:"Forest Fire Danger Index (FFDI) 75 with south west wind change; based on 11:00 point fire ignition and running until 18:00",geojson:"https://raw.githubusercontent.com/agentsoz/ees/72222359e6418bf491b8176ab47586dcbd551bc5/scenarios/mount-alexander-shire/app-data/maldon/20160420_MtAlexShire_FDI75_Iso.json"}]},{id:"Surf_Coast_Shire",name:"Surf Coast Shire",center:[144.326271,-38.332386],matsimNetworkLayer:"surf_coast_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/surf-coast-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84",name:"Anglesea_FFDI104 PHX5 2016 MINSUP FH2017 GRID",description:"12:00 point fire ignition",geojson:"https://raw.githubusercontent.com/agentsoz/ees/f25dd3427060180f08716c25198d5b6e0e530fd9/scenarios/surf-coast-shire/data/phoenix/Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84.json"}]}]},getters:{map:function(e){return e.map},mapInstance:function(e){return e.map.instance},mapboxStyle:function(e){return e.mapboxStyle},mapCenter:function(e){return e.mapCenter},mapSettingsIsOpen:function(e){return e.mapSettingsIsOpen},matsimNetworkLayer:function(e){return e.matsimNetworkLayer},selectedRegion:function(e){return e.selectedRegion},selectedFire:function(e){return e.selectedFire},regions:function(e){return e.regions},fireGeoJson:function(e){return e.fireGeoJson},reloadOverlayLayersOnStyleData:function(e){return e.reloadOverlayLayersOnStyleData},region:function(e){return function(t){return e.regions.find(function(e){return e.id===t})}},firesInSelectedRegion:function(e,t){if(!e.selectedRegion)return null;var n=t.region(e.selectedRegion);return n.phoenixRuns},selectedFireData:function(e,t){var n=t.firesInSelectedRegion;if(!n)return null;var r=n.find(function(t){return t.id===e.selectedFire});return r}},mutations:{setMapInstance:function(e,t){e.map.instance=t},setMapboxStyle:function(e,t){e.mapboxStyle=t,e.map.instance.setStyle("mapbox://styles/mapbox/"+e.mapboxStyle+"-v9"),e.reloadOverlayLayersOnStyleData=!0},setMapSettingsIsOpen:function(e,t){e.mapSettingsIsOpen=t},setReloadOverlayLayersOnStyleData:function(e,t){e.reloadOverlayLayersOnStyleData=t},setSelectedRegion:function(e,t){e.selectedRegion=t},setSelectedFire:function(e,t){e.selectedFire=t}},actions:{}}),h=n("7be2"),v=n.n(h),b=n("e192"),_=n.n(b),S={style:"mapbox://styles/mapbox/"+y.getters.mapboxStyle+"-v9",center:y.getters.map.center,minZoom:0,zoom:6,maxZoom:14};function x(e,t){for(var n,r=e.getStyle().layers,o=0;o<r.length;o++)if("symbol"===r[o].type){n=r[o].id;break}e.addLayer({id:t,type:"line",source:t,"source-layer":t,minzoom:0,maxzoom:22,paint:{"line-color":"#7777ff","line-width":.5}},n),e.addLayer({id:t+"-highlighted",type:"line",source:t,"source-layer":t,minzoom:0,maxzoom:22,paint:{"line-color":"#FF8C00","line-width":1.5},filter:["in","ID",""]},n)}function w(e,t){e.flyTo({center:t,zoom:8,bearing:0,speed:.5,curve:1,easing:function(e){return e}})}function k(e,t,n){var r=e.getLayer(t);if("undefined"==typeof r){for(var o,i=e.getStyle().layers,a=0;a<i.length;a++)if("symbol"===i[a].type){o=i[a].id;break}e.addLayer({id:t,type:"line",source:{type:"geojson",data:n},layout:{},paint:{"line-color":"#f00","line-opacity":.4,"line-width":2}},o)}else e.getSource(t).setData(n)}function O(e,t,n){e.addSource(t,{type:"vector",tiles:[n],minzoom:0,maxzoom:14})}function I(e,t){y.commit("setMapInstance",e);var n=y.getters.selectedRegion;if(n){var r=y.getters.region(n),o=r.matsimNetworkLayer;if(1==t)try{e.removeLayer(o),e.removeLayer(o+"-higlighted"),e.removeSource(o)}catch(e){}O(e,o,r.matsimNetworkTiles),x(e,o),e.on("click",function(t){var n=[[t.point.x-5,t.point.y-5],[t.point.x+5,t.point.y+5]],r=e.queryRenderedFeatures(n,{layers:[o]});if(r){var i=r[0].geometry.coordinates.slice()[0][0],a=r[0].properties.ID;(new _.a.Popup).setLngLat(i).setHTML("Link "+a).addTo(e);var s=r.reduce(function(e,t){return e.push(t.properties.ID),e},["in","ID"]);e.setFilter(o+"-highlighted",s)}})}var i=y.getters.selectedFireData;i&&k(e,"phoenix-layer",i.geojson),e.on("styledata",function(){1==y.getters.reloadOverlayLayersOnStyleData&&(I(e,y.getters.reloadOverlayLayersOnStyleData),y.commit("setReloadOverlayLayersOnStyleData",!1))})}var F={name:"maplayer",components:{mapbox:v.a},methods:{loadLayers:I,setFireLayer:k,flyTo:w},data:function(){return{opts:S}}},L=F,R=(n("ec17"),Object(a["a"])(L,m,f,!1,null,"6ce972d9",null));R.options.__file="Map.vue";var D=R.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-settings-container",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()}}},[n("div",{staticClass:"map-settings-button-container mapboxgl-ctrl-top-right"},[n("div",{staticClass:"mapboxgl-ctrl mapboxgl-ctrl-group"},[n("button",{staticClass:"icon sprocket",attrs:{type:"button"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()},click:function(t){e.toggle()}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"map-overlay"},[n("div",{staticClass:"map-settings-panel",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.toggle()}}},[n("label",{attrs:{for:"map-style"}},[e._v("Map style:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.mapboxStyle,expression:"mapboxStyle"}],attrs:{id:"map-style"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.mapboxStyle=t.target.multiple?n:n[0]}}},e._l(e.styles,function(t){return n("option",{key:t.id,attrs:{disabled:e.mapboxStyle==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})),n("label",{attrs:{for:"map-region"}},[e._v("Region:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRegion,expression:"selectedRegion"}],attrs:{id:"map-region"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRegion=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"no-region",disabled:""}}),e._l(e.regions,function(t){return n("option",{key:t.id,attrs:{disabled:e.selectedRegion==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),n("label",{attrs:{for:"map-fire"}},[e._v("Phoenix Fire:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFire,expression:"selectedFire"}],attrs:{id:"map-fire"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedFire=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"no-fire",disabled:""}}),e._l(e.firesInSelectedRegion,function(t){return n("option",{key:t.id,attrs:{disabled:e.selectedFire==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2)])])])},j=[],M={name:"mapSettings",props:{},data:function(){return{styles:this.$store.getters.map.styles,regions:this.$store.getters.regions}},computed:{isOpen:{get:function(){return this.$store.getters.mapSettingsIsOpen},set:function(e){this.$store.commit("mapSettingsIsOpen",e)}},firesInSelectedRegion:function(){return this.$store.getters.firesInSelectedRegion?this.$store.getters.firesInSelectedRegion:[]},mapboxStyle:{get:function(){return this.$store.getters.mapboxStyle},set:function(e){this.toggle(),this.$store.commit("setMapboxStyle",e)}},selectedRegion:{get:function(){return this.$store.getters.selectedRegion?this.$store.getters.selectedRegion:"no-region"},set:function(e){this.toggle(),this.$store.commit("setSelectedRegion",e),D.methods.flyTo(this.$store.getters.map.instance,this.$store.getters.region(this.$store.getters.selectedRegion).center),D.methods.loadLayers(this.$store.getters.map.instance,!0)}},selectedFire:{get:function(){return this.$store.getters.selectedFire},set:function(e){this.toggle(),this.$store.commit("setSelectedFire",e);var t=this.$store.getters.selectedFireData;D.methods.setFireLayer(this.$store.getters.map.instance,"phoenix-layer",t?t.geojson:"")}}},methods:{toggle:function(){this.$store.commit("setMapSettingsIsOpen",!this.$store.getters.mapSettingsIsOpen)}}},C=M,N=(n("5630"),Object(a["a"])(C,$,j,!1,null,null,null));N.options.__file="MapSettings.vue";var P=N.exports,T={name:"home",components:{maplayer:D,settings:P},methods:{toggleSettings:P.methods.toggle}},A=T,z=Object(a["a"])(A,d,p,!1,null,null,null);z.options.__file="Home.vue";var E=z.exports;r["a"].use(u["a"]);var G=new u["a"]({routes:[{path:"/",name:"home",component:E},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),B=n("9f7b");n("f9e3"),n("2dd8");r["a"].use(B["a"]),r["a"].config.productionTip=!1,new r["a"]({el:"#app",router:G,store:y,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("2856"),o=n.n(r);o.a},d8e2:function(e,t,n){},e3c5:function(e,t,n){},ec17:function(e,t,n){"use strict";var r=n("d8e2"),o=n.n(r);o.a}});
//# sourceMappingURL=app.4093aee7.js.map