(function(e){function t(t){for(var n,a,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)a=s[u],r[a]&&d.push(r[a][0]),r[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,a=1;a<i.length;a++){var s=i[a];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},a={app:0},r={app:0},o=[];function s(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"ed17bc67"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={about:1};a[e]?t.push(a[e]):0!==a[e]&&i[e]&&t.push(a[e]=new Promise(function(t,i){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"e8a3e408"}[e]+".css",r=l.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===n||u===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.request=n,delete a[e],p.parentNode.removeChild(p),i(o)},p.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){a[e]=0}));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=o);var c,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(e),c=function(t){d.onerror=d.onload=null,clearTimeout(p);var i=r[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+a+")");o.type=n,o.request=a,i[1](o)}r[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,u.appendChild(d)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/ees-ui/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"11d8":function(e,t,i){"use strict";var n=i("50f0"),a=i.n(n);a.a},1570:function(e,t,i){"use strict";var n=i("826e"),a=i.n(n);a.a},1870:function(e,t,i){"use strict";var n=i("1f71"),a=i.n(n);a.a},"1f71":function(e,t,i){},"24f5":function(e,t,i){"use strict";var n=i("9c29"),a=i.n(n);a.a},4658:function(e,t,i){},"50f0":function(e,t,i){},5630:function(e,t,i){"use strict";var n=i("d8a7"),a=i.n(n);a.a},"56d7":function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view",{staticClass:"router-view"})],1)},r=[],o=(i("5c0b"),i("2877")),s={},l=Object(o["a"])(s,a,r,!1,null,null,null);l.options.__file="App.vue";var c,u,d=l.exports,p=i("8c4f"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.toggleSettingsVis()}}},[i("maplayer"),i("slider"),i("spinner"),i("population"),i("setup"),i("settings")],1)},m=[],g=i("be94"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("mapbox",{attrs:{"access-token":e.mapboxAccessToken,"map-options":e.mapOpts,"geolocate-control":{show:!0,position:"top-right"},"scale-control":{show:!0,position:"bottom-left"}},on:{"map-load":e.storeMapInstance}})},h=[],b=(i("f751"),i("7be2")),y=i.n(b),_=i("e192"),S=i.n(_),x=i("6ee6"),k=i.n(x),O=i("b106"),I=i.n(O),L=i("2f62"),F=(i("7514"),{mapboxAccessToken:"pk.eyJ1IjoiZGhpeHNpbmdoIiwiYSI6ImNqbWx4OTR0ZzBkMWUzb255and1aTUweGkifQ.U0vPiwyfM4ad7axC_4dkHg",styles:[{id:"basic",name:"Basic"},{id:"bright",name:"Bright"},{id:"dark",name:"Dark"},{id:"light",name:"Light"},{id:"satellite",name:"Satellite"},{id:"streets",name:"Streets"}],regions:[{id:"Mount_Alexander_Shire",name:"Mount Alexander Shire",center:[144.212304,-37.064737],matsimNetworkLayer:"mount_alexander_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/mount-alexander-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"20181109_mountalex_evac_ffdi50a_grid",name:"20181109 Mountalex evac FFDI50a",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi50a_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi50b_grid",name:"20181109 Mountalex evac FFDI50b",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi50b_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi50c_grid",name:"20181109 Mountalex evac FFDI50c",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi50c_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi50d_grid",name:"20181109 Mountalex evac FFDI50d",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi50d_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi75a_grid",name:"20181109 Mountalex evac FFDI75a",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi75a_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi75b_grid",name:"20181109 Mountalex evac FFDI75b",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi75b_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi75c_grid",name:"20181109 Mountalex evac FFDI75c",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi75c_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi75d_grid",name:"20181109 Mountalex evac FFDI75d",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi75d_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi100b_grid",name:"20181109 Mountalex evac FFDI100b",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi100b_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi100c_grid",name:"20181109 Mountalex evac FFDI100c",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi100c_grid.shp.json"},{id:"20181109_mountalex_evac_ffdi100d_grid",name:"20181109 Mountalex evac FFDI100d",description:"",geojson:"https://ees-server.now.sh/phoenix/20181109_mountalex_evac_ffdi100d_grid.shp.json"}]},{id:"Surf_Coast_Shire",name:"Surf Coast Shire",center:[144.326271,-38.332386],matsimNetworkLayer:"surf_coast_shire_networkP",matsimNetworkTiles:"https://ees-server.now.sh/matsim-tiles/surf-coast-shire/{z}/{x}/{y}.pbf",phoenixRuns:[{id:"Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84",name:"Anglesea_FFDI104 PHX5 2016 MINSUP FH2017 GRID",description:"12:00 point fire ignition",geojson:"https://raw.githubusercontent.com/agentsoz/ees/f25dd3427060180f08716c25198d5b6e0e530fd9/scenarios/surf-coast-shire/data/phoenix/Anglesea_evac_test_ffdi104_phx5_2016data_minsup_fh2017_grid_WSG84.json"}]}]}),T={mapboxAccessToken:function(e){return e.mapboxAccessToken},styles:function(e){return e.styles},regions:function(e){return e.regions},region:function(e){return function(t){return e.regions.find(function(e){return e.id===t})}},firesInRegion:function(e,t){return function(e){var i=t.region(e);return i.phoenixRuns}}},w={},M={},j={state:F,getters:T,mutations:w,actions:M},A=i("ade3"),C=(i("ac4d"),i("8a81"),i("ac6a"),i("6762"),i("2fdb"),"START_LOADING"),R="DONE_LOADING",N="SET_MAP_INSTANCE",E="SET_DRAW_INSTANCE",P="SET_MAPBOX_STYLE",D="SETTINGS_VISIBILITY",$="SELECT_REGION",q="CLEAR_REGION",H="FLY_TO",U="SET_FIRST_SYMBOL_LAYER",B="MATSIM_ADD_SOURCE",G="MATSIM_ADD_LAYER",Y="MATSIM_SET_BASE_LAYER",z="MATSIM_SET_HIGHLIGHT_LAYER",V="MATSIM_SELECT_LINK",X="MATSIM_DESELECT_LINK",J="SELECT_FIRE",W="CLEAR_FIRE",Z="PHOENIX_ADD_SOURCE",K="PHOENIX_ADD_LAYER",Q="PHOENIX_SET_OPACITY",ee="PHOENIX_TIME_STEP",te="TOGGLE_3D",ie={isLoading:0,mapboxStyle:"dark",firstSymbolLayer:null,mapSettingsIsOpen:!1,baseMATSimLayer:null,highlightMATSimLayer:null,loadedMATSimLayers:[],loadedMATSimSource:null,selectedRegion:null,populationSquares:[],squarePopulationIsOpen:!1,selectedMATSimLink:"",affectedLinkIsOpen:!1,mapInstance:null,drawInstance:null,mapCenter:[144.968447,-37.818232]},ne={mapInstance:function(e){return e.mapInstance},drawInstance:function(e){return e.drawInstance},selectedStyle:function(e,t,i){if(!e.mapboxStyle)return null;var n=i.config.styles,a=n.find(function(t){return t.id===e.mapboxStyle});return a},selectedRegion:function(e,t,i,n){return e.selectedRegion?n.region(e.selectedRegion):null},firesInSelectedRegion:function(e,t,i,n){return e.selectedRegion?n.firesInRegion(e.selectedRegion):[]}},ae=(c={},Object(A["a"])(c,C,function(e){e.isLoading++}),Object(A["a"])(c,R,function(e){e.isLoading>0&&e.isLoading--}),Object(A["a"])(c,N,function(e,t){e.mapInstance=t}),Object(A["a"])(c,E,function(e,t){e.drawInstance=t}),Object(A["a"])(c,P,function(e,t){e.mapboxStyle=t,e.mapInstance.setStyle("mapbox://styles/mapbox/"+e.mapboxStyle+"-v9")}),Object(A["a"])(c,D,function(e,t){e.mapSettingsIsOpen=t}),Object(A["a"])(c,$,function(e,t){e.selectedRegion=t}),Object(A["a"])(c,Y,function(e,t){e.baseMATSimLayer=t}),Object(A["a"])(c,z,function(e,t){e.highlightMATSimLayer=t}),Object(A["a"])(c,H,function(e,t){e.mapInstance.flyTo({center:t,zoom:8,bearing:0,speed:.5,curve:1,easing:function(e){return e}}),e.mapCenter=t}),Object(A["a"])(c,te,function(e,t){t?e.mapInstance.easeTo({pitch:60}):e.mapInstance.easeTo({pitch:0})}),Object(A["a"])(c,U,function(e){for(var t,i=e.mapInstance.getStyle().layers,n=0;n<i.length;n++)if("symbol"===i[n].type&&i[n].id.includes("label")){t=i[n].id;break}e.firstSymbolLayer=t}),Object(A["a"])(c,G,function(e,t){e.mapInstance.addLayer({id:t.layerName,type:"line",source:t.sourceName,"source-layer":t.sourceLayer,minzoom:0,maxzoom:22,paint:t.paint,filter:t.filter},e.firstSymbolLayer),e.loadedMATSimLayers.push(t.layerName)}),Object(A["a"])(c,B,function(e,t){e.mapInstance.addSource(t.sourceName,{type:"vector",tiles:[t.pbfurl],minzoom:0,maxzoom:14}),e.loadedMATSimSource=t.sourceName}),Object(A["a"])(c,q,function(e){var t=e.mapInstance,i=!0,n=!1,a=void 0;try{for(var r,o=e.loadedMATSimLayers[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value;t.removeLayer(s)}}catch(l){n=!0,a=l}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}e.loadedMATSimLayers=[],e.loadedMATSimSource&&(t.removeSource(e.loadedMATSimSource),e.loadedMATSimSource=null),e.baseMATSimLayer=null,e.highlightMATSimLayer=null}),Object(A["a"])(c,"drawPopulationSquare",function(e){var t=e.mapInstance,i=e.drawInstance;i.changeMode("draw_rectangle"),t.getCanvas().style.cursor="crosshair"}),Object(A["a"])(c,"addPopulationSquare",function(e,t){e.mapInstance.getCanvas().style.cursor="",e.populationSquares.push(t),e.squarePopulationIsOpen=!0}),Object(A["a"])(c,"setSquarePopulationIsOpen",function(e,t){e.squarePopulationIsOpen=t}),Object(A["a"])(c,V,function(e,t){e.selectedMATSimLink=t}),Object(A["a"])(c,X,function(e){e.selectedMATSimLink=""}),Object(A["a"])(c,"setAffectedLinkIsOpen",function(e,t){e.affectedLinkIsOpen=t}),c),re={toggleSettingsVis:function(e){var t=e.state,i=e.commit;i(D,!t.mapSettingsIsOpen)},changeMapboxStyle:function(e,t){var i=e.commit,n=e.dispatch;n("clearMap"),i(P,t)},clearMap:function(e){var t=e.commit;t(q)},selectRegion:function(e,t){var i=e.dispatch,n=e.commit,a=e.getters;n($,t),i("clearMap"),i("loadLayers"),n(H,a.selectedRegion.center)},loadLayers:function(e){var t=e.dispatch,i=e.getters,n=i.selectedRegion;if(n){var a={sourceName:"matsim",pbfurl:n.matsimNetworkTiles,layerName:n.matsimNetworkLayer,sourceLayer:n.matsimNetworkLayer,paint:{"line-color":"#7777ff","line-width":.5},filter:["all"]};t("loadMATSimNetwork",a)}},loadMATSimNetwork:function(e,t){var i=e.commit;i(C),fetch("https://ees-server.now.sh/wake/please").then(function(){i(R)}),i(B,t),i(G,t),i(Y,t.layerName);var n=JSON.parse(JSON.stringify(t));n=Object.assign(n,{layerName:t.layerName+"-highlighted",paint:{"line-color":"#FF8C00","line-width":1.5},filter:["in","ID",""]}),i(G,n),i(z,n.layerName)}},oe={state:ie,getters:ne,mutations:ae,actions:re},se=(i("6b54"),i("55dd"),{fireStepMinutes:10,selectedFire:null,loadedFireLayers:[],loadedFireSources:[],visibleFireStep:null,fire3DFlameHeight:!1,fireSliderTicks:!0,fireOpacity:.4,fireIntensityLevels:[[0,"#ffc107"],[1e5,"#dc3545"]]}),le={fireStepMinutes:function(e){return e.fireStepMinutes},visibleFireStep:function(e){return e.visibleFireStep},totalFireLayers:function(e){return e.loadedFireLayers.length},selectedFire:function(e,t){var i=t.firesInSelectedRegion;if(!i)return null;var n=i.find(function(t){return t.id===e.selectedFire});return n},fireAboveLayer:function(e,t,i){return i.firstSymbolLayer}},ce=(u={},Object(A["a"])(u,J,function(e,t){e.selectedFire=t}),Object(A["a"])(u,Z,function(e,t){var i=t.fireSlice,n=i.sourceName;t.map.addSource(n,{type:"geojson",data:i.geojson}),e.loadedFireSources.push(n)}),Object(A["a"])(u,K,function(e,t){var i,n=t.fireSlice;i=e.fire3DFlameHeight?{id:n.layerName,type:"fill-extrusion",source:n.sourceName,filter:["has","FLAME_HT"],layout:{visibility:"none"},paint:{"fill-extrusion-color":{property:"E_INTSTY",stops:e.fireIntensityLevels},"fill-extrusion-height":{property:"FLAME_HT",stops:[[0,1],[300,1e3]]},"fill-extrusion-base":0,"fill-extrusion-opacity":e.fireOpacity}}:{id:n.layerName,type:"fill",source:n.sourceName,layout:{visibility:"none"},paint:{"fill-color":{property:"E_INTSTY",stops:e.fireIntensityLevels},"fill-opacity":e.fireOpacity}},t.map.addLayer(i,t.beforeLayer),e.loadedFireLayers.push(n.layerName)}),Object(A["a"])(u,Q,function(e,t){e.fireOpacity=t}),Object(A["a"])(u,te,function(e,t){e.fire3DFlameHeight=t}),Object(A["a"])(u,W,function(e,t){var i=!0,n=!1,a=void 0;try{for(var r,o=e.loadedFireLayers[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var s=r.value;t.removeLayer(s)}}catch(m){n=!0,a=m}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}e.loadedFireLayers=[];var l=!0,c=!1,u=void 0;try{for(var d,p=e.loadedFireSources[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;t.removeSource(f)}}catch(m){c=!0,u=m}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}e.loadedFireSources=[],e.visibleFireStep=null}),Object(A["a"])(u,ee,function(e,t){e.visibleFireStep=t}),u),ue={clearMap:function(e){var t=e.commit,i=e.rootGetters;t(W,i.mapInstance)},loadLayers:function(e){var t=e.dispatch,i=e.getters,n=i.selectedFire;n&&t("fetchFire",n.geojson)},selectFire:function(e,t){var i=e.dispatch,n=e.commit,a=e.getters;n(J,t);var r=a.selectedFire;i("fetchFire",r?r.geojson:"")},fetchFire:function(e,t){var i=e.dispatch,n=e.commit,a=e.getters,r=e.rootGetters,o=r.mapInstance;n(W,o),n(C),fetch(t).then(function(e){return e.json()}).then(function(e){var t=e.features;t.sort(function(e,t){return null===e.properties.HOUR_BURNT?-1:null===t.properties.HOUR_BURNT?1:e.properties.HOUR_BURNT-t.properties.HOUR_BURNT});var r=t[t.length-1],s=60*r.properties.HOUR_BURNT,l=Math.ceil(s/a.fireStepMinutes),c=0;while(null===t[c].properties.HOUR_BURNT)c++;for(var u=0;u<l;u++){var d=u*a.fireStepMinutes/60,p={type:"FeatureCollection",features:[]};while(t[c].properties.HOUR_BURNT<d)p.features.push(t[c]),c++;var f=u.toString(),m="phoenix-layer"+f,g="phoenix-source"+f;n(Z,{map:o,fireSlice:{sourceName:g,geojson:p}}),n(K,{map:o,beforeLayer:a.fireBeforeLayer,fireSlice:{sourceName:g,layerName:m}})}i("filterFire",l-1),n(R)})},filterFire:function(e,t){for(var i=e.getters,n=e.commit,a=i.mapInstance,r=0;r<i.totalFireLayers;r++){var o="phoenix-layer"+r.toString();r<=t?a.setLayoutProperty(o,"visibility","visible"):a.setLayoutProperty(o,"visibility","none")}n(ee,t)},resetFireLayers:function(e){var t,i,n,a=e.dispatch,r=e.rootGetters,o=e.getters,s=e.commit,l=r.mapInstance,c=o.totalFireLayers;for(t=0;t<c;t++)i=t.toString(),n="phoenix-layer"+i,l.removeLayer(n);for(se.loadedFireLayers=[],t=0;t<c;t++){i=t.toString();var u="phoenix-source"+i;n="phoenix-layer"+i,s(K,{map:l,fireSlice:{sourceName:u,layerName:n}})}a("filterFire",o.visibleFireStep)},toggleFireIn3D:function(e){var t=e.dispatch,i=e.state,n=e.commit;n(te,!i.fire3DFlameHeight),t("resetFireLayers")}},de={state:se,getters:le,mutations:ce,actions:ue};n["a"].use(L["a"]);var pe=new L["a"].Store({modules:{config:j,map:oe,fire:de}}),fe={name:"maplayer",computed:Object(g["a"])({},Object(L["d"])({mapboxAccessToken:function(e){return e.config.mapboxAccessToken},mapboxStyle:function(e){return e.map.mapboxStyle},mapCenter:function(e){return e.map.mapCenter},mapInstance:function(e){return e.map.mapInstance},baseMATSimLayer:function(e){return e.map.baseMATSimLayer},highlightMATSimLayer:function(e){return e.map.highlightMATSimLayer}}),{mapOpts:function(){var e={style:"mapbox://styles/mapbox/"+this.mapboxStyle+"-v9",center:this.mapCenter,minZoom:0,zoom:6,maxZoom:18};return e}}),components:{mapbox:y.a},methods:{storeMapInstance:function(e){e.on("click",this.mapOnClick),e.on("draw.create",this.squareCreated),e.on("style.load",this.loadLayersOnStyleChange);var t=new k.a({displayControlsDefault:!1,modes:Object.assign({draw_rectangle:I.a},k.a.modes)});e.addControl(t),pe.commit(N,e),pe.commit(E,t),pe.commit(U)},loadLayersOnStyleChange:function(){pe.commit(U),pe.dispatch("loadLayers")},squareCreated:function(e){var t=e.features[0];pe.commit("addPopulationSquare",t)},mapOnClick:function(e){var t,i=[[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]],n=this.mapInstance.queryRenderedFeatures(i,{layers:[this.baseMATSimLayer]});if("undefined"!=typeof n&&0!==n.length){var a=n[0].geometry.coordinates.slice()[0][0],r=n[0].properties.ID;(new S.a.Popup).setLngLat(a).setHTML("Link "+r).addTo(this.mapInstance),t=n.reduce(function(e,t){return e.push(t.properties.ID),e},["in","ID"]),pe.commit(V,r)}else t=["in","ID",""],pe.commit(X,r);this.mapInstance.setFilter(this.highlightMATSimLayer,t)}}},me=fe,ge=(i("1870"),Object(o["a"])(me,v,h,!1,null,"63805b3c",null));ge.options.__file="Map.vue";var ve=ge.exports,he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visibleFireStep||0===e.visibleFireStep?i("div",{staticClass:"time-slider-overlay"},[i("div",{staticClass:"time-slider-overlay-inner"},[i("vue-slider",e._b({ref:"fireslider",attrs:{id:"custom-tootip"},on:{callback:e.updateFilter},scopedSlots:e._u([{key:"label",fn:function(t){var n=t.label,a=t.active;return[e.renderLabelTick(n)?i("span",{class:["custom-label",{active:a}]},[e._v("\n          "+e._s(e.stepToLabel(n))+"\n        ")]):e._e()]}}])},"vue-slider",e.sliderConfig,!1))],1)]):e._e()},be=[],ye=(i("f576"),i("6f79")),_e=i.n(ye),Se={name:"mapSlider",components:{vueSlider:_e.a},props:{},data:function(){var e=[];return e["sm"]=12,e["md"]=9,e["lg"]=6,{labelStep:e}},computed:Object(g["a"])({},Object(L["d"])({visibleFireStep:function(e){return e.fire.visibleFireStep},fireSliderTicks:function(e){return e.fire.fireSliderTicks}}),Object(L["c"])(["totalFireLayers"]),{sliderConfig:function(){return{width:"98%",show:!0,value:this.visibleFireStep?this.visibleFireStep:0,min:0,max:this.totalFireLayers?this.totalFireLayers-1:0,piecewiseLabel:!0,tooltip:!1}}}),methods:{renderLabelTick:function(e){if(this.fireSliderTicks||this.hasLabel(e))return!0},hasLabel:function(e){var t=this.$data.labelStep[this.$mq],i=e<this.totalFireLayers-t+1;return e%t===0&&i||e===this.totalFireLayers-1},stepToLabel:function(e){return this.hasLabel(e)?"+"+Math.floor(10*e/60).toString()+":"+(10*e%60).toString().padStart(2,"0"):""},updateFilter:function(e){this.$store.dispatch("filterFire",e)}}},xe=Se,ke=(i("24f5"),Object(o["a"])(xe,he,be,!1,null,null,null));ke.options.__file="MapTimeSlider.vue";var Oe=ke.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-settings-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"map-overlay"},[i("div",{staticClass:"map-population-panel"},[i("label",{attrs:{for:"map-population"}},[e._v("Population inside square:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.squarePopulation,expression:"squarePopulation"}],attrs:{id:"map-population",type:"text"},domProps:{value:e.squarePopulation},on:{input:function(t){t.target.composing||(e.squarePopulation=t.target.value)}}}),i("button",{staticClass:"icon",attrs:{type:"button"},on:{click:function(t){e.toggle()}}},[e._v("Save")])])]),i("div",{attrs:{id:"map-link-panel"}})])},Le=[],Fe=(i("c5f6"),{name:"mapSquarePopulation",props:{squarePopulation:{default:0,type:Number}},computed:{isOpen:{get:function(){return this.$store.state.map.squarePopulationIsOpen},set:function(e){this.$store.commit("setSquarePopulationIsOpen",e)}}},methods:{toggle:function(){this.$store.commit("setSquarePopulationIsOpen",!this.$store.state.map.squarePopulationIsOpen)}}}),Te=Fe,we=(i("9d64"),Object(o["a"])(Te,Ie,Le,!1,null,null,null));we.options.__file="MapSquarePopulation.vue";var Me=we.exports,je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return 0!==e.isLoading?i("div",{staticClass:"load-spinner-overlay"},[e._m(0)]):e._e()},Ae=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"load-spinner-overlay-inner"},[i("span",{staticClass:"loading"})])}],Ce={name:"mapSpinner",props:{},computed:Object(g["a"])({},Object(L["d"])({isLoading:function(e){return e.map.isLoading}}))},Re=Ce,Ne=(i("1570"),Object(o["a"])(Re,je,Ae,!1,null,null,null));Ne.options.__file="MapLoadSpinner.vue";var Ee=Ne.exports,Pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{staticClass:"p-0 h-100 mapboxgl-ctrl-top-left map-sidebar-container",attrs:{fluid:""}},[i("b-row",{staticClass:"h-100",attrs:{"no-gutters":""}},[i("b-col",{staticClass:"h-100 m-0 mapboxgl-ctrl map-sidebar-col",class:{hidden:e.isHidden},attrs:{lg:"4",md:"4",sm:"12"}},[i("div",{attrs:{id:"nav"}},[i("h5",[e._v("Emergency Evacuation Simulator")]),i("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n        "),i("router-link",{attrs:{to:"/about"}},[e._v("About")]),i("b-button",{staticStyle:{position:"absolute",bottom:"2px",right:"5px"},attrs:{size:"sm",variant:"secondary"},on:{click:function(t){e.toggle()}}},[e._v("Hide")])],1),i("div",{staticClass:"h-100 map-accordion-container"},[i("b-card",{staticClass:"mb-1",attrs:{header:"Map Style","no-body":""}},[i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.map-style-accordion",modifiers:{"map-style-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              "+e._s(e.selectedStyle.name)+"\n              "),i("div",{staticClass:"icon caret-down",staticStyle:{float:"right"}})])]),i("b-collapse",{attrs:{id:"map-style-accordion",accordion:"map-accordion",role:"tabpanel"}},[i("ul",e._l(e.styles,function(t){return i("li",{key:t.id,attrs:{disabled:e.selectedStyle.id==t.id}},[e.selectedStyle.id!=t.id?i("div",{attrs:{"data-map-style":t.id},on:{click:e.setStyle}},[e._v("\n                  "+e._s(t.name)+"\n                ")]):e._e()])}))])],1),i("b-card",{staticClass:"mb-1",attrs:{header:"Region","no-body":""}},[i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.map-region-accordion",modifiers:{"map-region-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              "+e._s(e.selectedRegion?e.selectedRegion.name:"Region")+"\n              "),i("div",{staticClass:"icon caret-down",staticStyle:{float:"right"}})])]),i("b-collapse",{attrs:{id:"map-region-accordion",visible:"",accordion:"map-accordion",role:"tabpanel"}},[i("ul",e._l(e.regions,function(t){return i("li",{key:t.id,attrs:{disabled:e.selectedRegion&&e.selectedRegion.id==t.id}},[!e.selectedRegion||e.selectedRegion&&e.selectedRegion.id!=t.id?i("div",{attrs:{"data-region":t.id},on:{click:e.setRegion}},[e._v("\n                  "+e._s(t.name)+"\n                ")]):e._e()])}))])],1),i("b-card",{staticClass:"mb-1",attrs:{header:"Emergency Incident","no-body":""}},[i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.map-fire-accordion",modifiers:{"map-fire-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              "+e._s(e.selectedFire?e.selectedFire.name:"Phoenix Fire")+"\n              "),i("div",{staticClass:"icon caret-down",staticStyle:{float:"right"}})])]),i("b-collapse",{attrs:{id:"map-fire-accordion",accordion:"map-accordion",role:"tabpanel"}},[i("ul",e._l(e.firesInSelectedRegion,function(t){return i("li",{key:t.id,attrs:{disabled:e.selectedFire&&e.selectedFire.id==t.id}},[!e.selectedFire||e.selectedFire&&e.selectedFire.id!=t.id?i("div",{attrs:{"data-fire":t.id},on:{click:e.setFire}},[e._v("\n                  "+e._s(t.name)+"\n                ")]):e._e()])}))])],1),i("b-card",{staticClass:"mb-1",attrs:{header:"Vehicle Configuration","no-body":""}},[i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.map-vehicle-accordion",modifiers:{"map-vehicle-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              Vehicle Configuration\n              "),i("div",{staticClass:"icon caret-down",staticStyle:{float:"right"}})])]),i("b-collapse",{attrs:{id:"map-vehicle-accordion",accordion:"map-accordion",role:"tabpanel"}},[i("ul",e._l(e.populationSquares,function(t){return i("li",{key:t.id},[i("div",[e._v("\n                  "+e._s(t.id)+"\n                ")])])}))]),i("div",{staticClass:"card-text"},[e._v("Test")])],1),i("b-card",{staticClass:"mb-1",attrs:{header:"Impacted Links","no-body":""}},[i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.map-link-accordion",modifiers:{"map-link-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              Provisioned Links\n              "),i("div",{staticClass:"icon caret-down",staticStyle:{float:"right"}})])]),i("b-collapse",{attrs:{id:"map-link-accordion",accordion:"map-accordion",role:"tabpanel"}},[i("ul",e._l([],function(t){return i("li",{key:t.id},[i("div",[e._v("\n                  link\n                ")])])}))]),i("div",{staticClass:"p-1",attrs:{role:"tab"}},[i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.add-map-link-accordion",modifiers:{"add-map-link-accordion":!0}}],attrs:{block:"",href:"#",variant:"info"}},[e._v("\n              Create New Link\n              "),i("a",{staticClass:"icon plus",staticStyle:{float:"right"},attrs:{href:"#"}})])]),i("b-collapse",{attrs:{id:"add-map-link-accordion",accordion:"map-accordion",role:"tabpanel"}},[i("mapAffectedLink",{attrs:{linkId:e.selectedMATSimLink}})],1)],1)],1)])],1)],1)},De=[],$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-link-panel"},[i("b-form-group",{attrs:{label:"MATSim Link ID:","label-for":"map-link"}},[i("b-form-input",{attrs:{id:"map-link",type:"text",placeholder:"Please select a MATSim Network Link from the map",readonly:""},model:{value:e.linkId,callback:function(t){e.linkId=t},expression:"linkId"}})],1),i("b-form-group",{attrs:{label:"Disruption Start Time:","label-for":"map-link-start"}},[i("b-form-input",{attrs:{id:"map-link-start",type:"text"},model:{value:e.linkStart,callback:function(t){e.linkStart=t},expression:"linkStart"}})],1),i("button",{staticClass:"icon",attrs:{type:"button"},on:{click:function(t){e.toggle()}}},[e._v("Save")])],1)},qe=[],He={name:"mapAffectedLink",props:{linkId:{default:"",type:String},linkStart:{default:"00:00",type:String}},computed:{isOpen:{get:function(){return this.$store.state.map.affectedLinkIsOpen},set:function(e){this.$store.commit("setAffectedLinkIsOpen",e)}}},methods:{toggle:function(){this.$store.commit("setAffectedLinkIsOpen",!this.$store.state.map.affectedLinkIsOpen)}}},Ue=He,Be=(i("11d8"),Object(o["a"])(Ue,$e,qe,!1,null,null,null));Be.options.__file="MapAffectedLink.vue";var Ge=Be.exports,Ye={name:"mapSetup",props:{},data:function(){return{isHidden:!1,styles:this.$store.state.config.styles,regions:this.$store.state.config.regions}},computed:Object(g["a"])({},Object(L["d"])({populationSquares:function(e){return e.map.populationSquares},selectedMATSimLink:function(e){return e.map.selectedMATSimLink}}),Object(L["c"])(["selectedStyle","selectedRegion","selectedFire"]),{firesInSelectedRegion:function(){return this.$store.getters.firesInSelectedRegion?this.$store.getters.firesInSelectedRegion:[]}}),components:{mapAffectedLink:Ge},methods:Object(g["a"])({},Object(L["b"])(["selectRegion","changeMapboxStyle","selectFire"]),{setStyle:function(e){this.changeMapboxStyle(e.target.dataset.mapStyle)},setRegion:function(e){this.selectRegion(e.target.dataset.region)},setFire:function(e){this.selectFire(e.target.dataset.fire)},drawRectangle:function(){this.$store.commit("drawPopulationSquare")},toggle:function(){this.isHidden=!this.isHidden}})},ze=Ye,Ve=(i("a69a"),Object(o["a"])(ze,Pe,De,!1,null,null,null));Ve.options.__file="MapSetup.vue";var Xe=Ve.exports,Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-settings-container",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.toggle()}}},[i("div",{staticClass:"map-settings-button-container mapboxgl-ctrl-top-right"},[i("div",{staticClass:"mapboxgl-ctrl mapboxgl-ctrl-group"},[i("button",{staticClass:"icon sprocket",attrs:{type:"button"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.toggle()},click:function(t){e.toggle()}}})]),i("div",{staticClass:"mapboxgl-ctrl mapboxgl-ctrl-group"},[i("button",{staticClass:"icon grid",attrs:{type:"button"},on:{click:function(t){e.drawRectangle()}}})]),i("div",{staticClass:"mapboxgl-ctrl mapboxgl-ctrl-group"},[i("button",{class:{"font-weight-bold":e.renderFireIn3D},attrs:{type:"button"},on:{click:function(t){e.toggleFireIn3D()}}},[e._v("3D")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"map-overlay"},[i("div",{staticClass:"map-settings-panel",on:{"!keydown":function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.toggle()}}},[i("label",{attrs:{for:"map-style"}},[e._v("Map style:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.mapboxStyle,expression:"mapboxStyle"}],attrs:{id:"map-style"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.mapboxStyle=t.target.multiple?i:i[0]}}},e._l(e.styles,function(t){return i("option",{key:t.id,attrs:{disabled:e.mapboxStyle==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})),i("label",{attrs:{for:"map-region"}},[e._v("Region:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRegion,expression:"selectedRegion"}],attrs:{id:"map-region"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRegion=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"no-region",disabled:""}}),e._l(e.regions,function(t){return i("option",{key:t.id,attrs:{disabled:e.selectedRegion==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),i("label",{attrs:{for:"map-fire"}},[e._v("Phoenix Fire:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFire,expression:"selectedFire"}],attrs:{id:"map-fire"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedFire=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"no-fire",disabled:""}}),e._l(e.firesInSelectedRegion,function(t){return i("option",{key:t.id,attrs:{disabled:e.selectedFire==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),i("label",{attrs:{for:"map-fire-opacity"}},[e._v("Fire Opacity:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.fireOpacity,expression:"fireOpacity"}],attrs:{id:"map-fire-opacity",type:"number",min:"0",max:"1",step:"0.01"},domProps:{value:e.fireOpacity},on:{input:function(t){t.target.composing||(e.fireOpacity=t.target.value)}}})])])])},We=[],Ze=(i("4917"),{name:"mapSettings",props:{},data:function(){return{styles:this.$store.state.config.styles,regions:this.$store.state.config.regions}},computed:{isOpen:{get:function(){return this.$store.state.map.mapSettingsIsOpen},set:function(e){this.$store.commit("mapSettingsIsOpen",e)}},firesInSelectedRegion:function(){return this.$store.getters.firesInSelectedRegion},mapboxStyle:{get:function(){return this.$store.state.map.mapboxStyle},set:function(e){this.toggle(),this.changeMapboxStyle(e)}},selectedRegion:{get:function(){return this.$store.state.map.selectedRegion?this.$store.state.map.selectedRegion:"no-region"},set:function(e){this.toggle(),this.selectRegion(e)}},selectedFire:{get:function(){return this.$store.state.fire.selectedFire},set:function(e){this.toggle(),this.selectFire(e)}},fireOpacity:{get:function(){return this.$store.state.fire.fireOpacity},set:function(e){var t=/^[-+]?[0-9]+\.[0-9]+$/;e.match(t)&&(this.$store.commit(Q,parseFloat(e)),this.$store.dispatch("resetFireLayers"))}},renderFireIn3D:{get:function(){return this.$store.state.fire.fire3DFlameHeight}}},methods:Object(g["a"])({},Object(L["b"])({toggleFireIn3D:"toggleFireIn3D",toggle:"toggleSettingsVis",changeMapboxStyle:"changeMapboxStyle",selectRegion:"selectRegion",selectFire:"selectFire"}),{drawRectangle:function(){this.$store.commit("drawPopulationSquare")}})}),Ke=Ze,Qe=(i("5630"),Object(o["a"])(Ke,Je,We,!1,null,null,null));Qe.options.__file="MapSettings.vue";var et=Qe.exports,tt={name:"home",components:{maplayer:ve,slider:Oe,spinner:Ee,population:Me,setup:Xe,settings:et},methods:Object(g["a"])({},Object(L["b"])(["toggleSettingsVis"]))},it=tt,nt=Object(o["a"])(it,f,m,!1,null,null,null);nt.options.__file="Home.vue";var at=nt.exports;n["a"].use(p["a"]);var rt=new p["a"]({routes:[{path:"/",name:"home",component:at},{path:"/about",name:"about",component:function(){return i.e("about").then(i.bind(null,"f820"))}}]}),ot=i("9f7b"),st=(i("f9e3"),i("2dd8"),i("660e"));n["a"].use(ot["a"]),n["a"].use(st["a"]),n["a"].config.productionTip=!1,new n["a"]({el:"#app",router:rt,store:pe,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("5e27"),a=i.n(n);a.a},"5e27":function(e,t,i){},"826e":function(e,t,i){},"98bd":function(e,t,i){},"9c29":function(e,t,i){},"9d64":function(e,t,i){"use strict";var n=i("4658"),a=i.n(n);a.a},a69a:function(e,t,i){"use strict";var n=i("98bd"),a=i.n(n);a.a},d8a7:function(e,t,i){}});
//# sourceMappingURL=app.8e154f15.js.map