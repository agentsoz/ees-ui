{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/MapAffectedLink.vue?e325","webpack:///./src/components/MapLoadSpinner.vue?fb79","webpack:///./src/components/MapTimeSlider.vue?cca3","webpack:///./src/components/MapSettings.vue?f0f6","webpack:///./src/App.vue?1784","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?5751","webpack:///./src/components/Map.vue?338a","webpack:///./src/store/modules/config.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/modules/map.js","webpack:///./src/store/modules/fire.js","webpack:///./src/store/modules/smoke.js","webpack:///./src/store/modules/population.js","webpack:///./src/store/modules/simulation.js","webpack:///./src/store/index.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3baf","webpack:///./src/components/Map.vue","webpack:///./src/components/MapTimeSlider.vue?2fd6","webpack:///src/components/MapTimeSlider.vue","webpack:///./src/components/MapTimeSlider.vue?fbfe","webpack:///./src/components/MapTimeSlider.vue?0662","webpack:///./src/components/MapSquarePopulation.vue?661d","webpack:///src/components/MapSquarePopulation.vue","webpack:///./src/components/MapSquarePopulation.vue?754d","webpack:///./src/components/MapSquarePopulation.vue?ffa3","webpack:///./src/components/MapLoadSpinner.vue?227b","webpack:///src/components/MapLoadSpinner.vue","webpack:///./src/components/MapLoadSpinner.vue?82b8","webpack:///./src/components/MapLoadSpinner.vue?400f","webpack:///./src/components/MapSetup.vue?ad2e","webpack:///./src/components/MapAffectedLink.vue?92d2","webpack:///src/components/MapAffectedLink.vue","webpack:///./src/components/MapAffectedLink.vue?dff7","webpack:///./src/components/MapAffectedLink.vue?1328","webpack:///./src/components/MapTrafficBehaviourCard.vue?28a5","webpack:///src/components/MapTrafficBehaviourCard.vue","webpack:///./src/components/MapTrafficBehaviourCard.vue?6a6a","webpack:///./src/components/MapTrafficBehaviourCard.vue?1ce7","webpack:///src/components/MapSetup.vue","webpack:///./src/components/MapSetup.vue?d457","webpack:///./src/components/MapSetup.vue?ee74","webpack:///./src/components/MapSettings.vue?c698","webpack:///src/components/MapSettings.vue","webpack:///./src/components/MapSettings.vue?43a1","webpack:///./src/components/MapSettings.vue?a891","webpack:///./src/components/SaveSettings.vue?bc1c","webpack:///src/components/SaveSettings.vue","webpack:///./src/components/SaveSettings.vue?8890","webpack:///./src/components/SaveSettings.vue?e535","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/App.vue?165b","webpack:///./src/components/MapTrafficBehaviourCard.vue?dd13","webpack:///./src/components/Map.vue?b5f5","webpack:///./src/components/SaveSettings.vue?e04a","webpack:///./src/components/MapSquarePopulation.vue?164f","webpack:///./src/components/MapSetup.vue?26dd"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticRenderFns","component","on","$event","indexOf","_k","keyCode","toggleSettingsVis","mapboxAccessToken","mapOpts","show","position","storeMapInstance","state","styles","id","getters","regions","tiles","populations","fires","region","regionId","populationsWithTag","filteredPops","Array","isArray","tags","includes","firesWithTag","filteredFires","f","mutations","actions","getConfig","url","commit","fetch","res","json","START_LOADING","DONE_LOADING","SET_MAP_INSTANCE","SET_DRAW_INSTANCE","SET_MAPBOX_STYLE","SETTINGS_VISIBILITY","SELECT_REGION","CLEAR_REGION","FLY_TO","SET_FIRST_SYMBOL_LAYER","MATSIM_ADD_SOURCE","MATSIM_ADD_LAYER","MATSIM_SET_BASE_LAYER","MATSIM_SET_HIGHLIGHT_LAYER","MATSIM_SET_SELECTED_DISRUPTION_LAYER","MATSIM_SET_DISRUPTION_LAYER","MATSIM_ADD_DISRUPTION","MATSIM_SELECT_LINK","MATSIM_DESELECT_LINK","MATSIM_SAVE_CONFIG","MATSIM_SETTINGS_VIS","SELECT_FIRE","CLEAR_FIRE","SELECT_POPULATION","CLEAR_POPULATION","POP_ADD_SOURCE","POP_ADD_LAYER","POP_ADD_GEOJSON","PHOENIX_ADD_SOURCE","PHOENIX_ADD_LAYER","PHOENIX_SET_OPACITY","PHOENIX_TIME_STEP","DRAW_SMOKE","EMBER_ADD_SOURCE","EMBER_ADD_LAYER","EMBER_SET_OPACITY","CLEAR_SMOKE","TOGGLE_3D","isLoading","mapboxStyle","firstSymbolLayer","mapSettingsIsOpen","baseMATSimLayer","highlightMATSimLayer","loadedMATSimLayers","loadedMATSimSource","selectedRegion","populationSquares","squarePopulationIsOpen","selectedMATSimLink","disruptions","affectedLinkIsOpen","mapInstance","drawInstance","mapCenter","selectedStyle","rootState","config","style","find","obj","rootGetters","popInSelectedRegion","firesInSelectedRegion","newMap","newDraw","newStyle","setStyle","newVal","disruptionMATSimLayer","selectedDisruptionMATSimLayer","flyTo","center","zoom","bearing","speed","curve","easing","easeTo","pitch","firstSymbolId","layers","getStyle","matsimNetwork","addLayer","layerName","source","sourceName","sourceLayer","minzoom","maxzoom","paint","filter","addSource","pbfurl","map","layer","removeLayer","removeSource","draw","changeMode","getCanvas","cursor","feature","changeMapboxStyle","dispatch","clearMap","selectRegion","loadLayers","process","matsimNetworkTiles","matsimNetworkLayer","loadMATSimNetwork","matsimNetworkHighlighted","JSON","parse","stringify","assign","matsimNetworkHighlightedDisruptions","matsimNetworkSelectedDisruptions","fireStepMinutes","selectedFire","loadedFireLayers","loadedFireSources","visibleFireStep","fire3DFlameHeight","fireOpacity","fireIntensityLevels","totalFireLayers","fireIgnitionMinutes","fireData","parseInt","ignition_hhmm","fireAboveLayer","payload","fireSlice","geojson","layout","visibility","stops","beforeLayer","selectFire","fire","file","smokeGeojson","fetchFire","response","features","sort","a","b","properties","HOUR_BURNT","lastFeature","totalMinutes","totalSteps","Math","ceil","threshold","sect","stepStr","toString","fireBeforeLayer","filterFire","fireStep","fireStartStep","setLayoutProperty","resetFireLayers","step","toggleFireIn3D","smokeVisible","loadedSmokeLayers","loadedSmokeSources","smokeOpacity","smokeIntensityLevels","totalSmokeLayers","smokeSlice","fetchSmoke","hour_spot","smokeBeforeLayer","drawSmoke","smokeStep","selectedPopulation","loadedPopLayers","loadedPopSources","populationGeojson","pops","totalPopLayers","popAboveLayer","popSlice","base","selectPopulation","pop","popData","fetchPopulation","end_hr","activityColors","home","work","beach","shops","other","whereareyounow","plan","keys","k","person","color","geometry","coordinates","x","y","getSource","setData","savedSettingsJson","simulationName","simSettingsIsOpen","method","body","headers","details","detail","join","log","Vue","use","Vuex","Store","smoke","population","simulation","disruptionSelected","computed","opts","minZoom","maxZoom","components","mapbox","methods","mapOnClick","squareCreated","loadLayersOnStyleChange","displayControlsDefault","modes","addControl","linkList","bbox","queryRenderedFeatures","ID","filteredItems","selectedDisruptionLinks","popupText","linksIsDisrupted","forEach","disruption","affectedLinks","speedUnit","absoluteSpeed","link","reduce","disruptedFilter","highlightFilter","setFilter","_b","ref","hasLabel","stepToTime","scopedSlots","_u","fn","active","class","_v","_s","model","callback","$$v","timeStep","expression","sliderConfig","_e","props","ls","labelStep","width","min","max","maxSteps","set","$store","val","interval","$mq","notTooClose","directives","rawName","domProps","composing","squarePopulation","toggle","default","Number","isOpen","_m","_l","display_name","helperOptions","modifiers","proxy","showSmoke","text","linkId","linkStart","String","valueToPercent","valueToMark","trafficSpeed","dotStyle","display","isHidden","modalShow","global","phoenix","matsim","trafficBehaviour","dest_selected","dest_options","selectedIncident","decimal","match","parseFloat","mapAffectedLink","MapAffectedLink","MapTrafficBehaviourCard","FontAwesomeIcon","dataset","mapStyle","setRegion","drawRectangle","changeTime","charAt","temp","split","evac_time","renderFireIn3D","showDisruptionWindow","$$selectedVal","options","selected","_value","multiple","_i","$$a","$$el","$$c","checked","$$i","concat","staticStyle","isLinkDisrupted","deleteDisruption","saveDisruption","store","start","$refs","startTime","end","endTime","description","selectedLink","SaveSimulationToggle","SaveSimulationConfig","Boolean","saveSimIsOpen","outputTemplate","ees","scenario_main","maplayer","Map","slider","MapTimeSlider","spinner","MapLoadSpinner","MapSquarePopulation","setup","MapSetup","settings","MapSettings","savesettings","SaveSettings","Router","routes","path","Home","BootstrapVue","VueMq","productionTip","el","router","render","h","App","mounted","$mount"],"mappings":"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","file":"js/app.9ec30584.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"a7103d2b\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"about\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"e8a3e408\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/ees-ui/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapAffectedLink.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapAffectedLink.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapLoadSpinner.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapLoadSpinner.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTimeSlider.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTimeSlider.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSettings.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSettings.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view',{staticClass:\"router-view\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5bdec0c6&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{on:{\"!keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.toggleSettingsVis()}}},[_c('maplayer'),_c('slider'),_c('spinner'),_c('population'),_c('setup'),_c('settings'),_c('savesettings')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mapbox',{attrs:{\"access-token\":_vm.mapboxAccessToken,\"map-options\":_vm.mapOpts,\"geolocate-control\":{\n    show: true,\n    position: 'top-right'\n  },\"scale-control\":{\n    show: true,\n    position: 'bottom-left'\n  }},on:{\"map-load\":_vm.storeMapInstance}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Configuration for the application.\n//\n\nconst state = {\n  mapboxAccessToken:\n    \"pk.eyJ1IjoiZGhpeHNpbmdoIiwiYSI6ImNqbWx4OTR0ZzBkMWUzb255and1aTUweGkifQ.U0vPiwyfM4ad7axC_4dkHg\",\n  data: null,\n  styles: [\n    {\n      id: \"basic\",\n      name: \"Basic\"\n    },\n    {\n      id: \"bright\",\n      name: \"Bright\"\n    },\n    {\n      id: \"dark\",\n      name: \"Dark\"\n    },\n    {\n      id: \"light\",\n      name: \"Light\"\n    },\n    {\n      id: \"satellite\",\n      name: \"Satellite\"\n    },\n    {\n      id: \"streets\",\n      name: \"Streets\"\n    }\n  ]\n};\n\nconst getters = {\n  mapboxAccessToken: state => state.mapboxAccessToken,\n  styles: state => state.styles,\n  regions: state => {\n    if (state.data) {\n      return state.data.tiles;\n    } else {\n      return {};\n    }\n  },\n  populations: state => {\n    if (state.data) {\n      return state.data.populations;\n    } else {\n      return {};\n    }\n  },\n  fires: state => {\n    if (state.data) {\n      return state.data.fires;\n    } else {\n      return {};\n    }\n  },\n  region: state => regionId => {\n    return state.data.tiles[regionId];\n  },\n  populationsWithTag: (state, getters) => tag => {\n    const populations = getters.populations;\n    var filteredPops = {};\n    for (const p in populations) {\n      if (\n        Array.isArray(populations[p].tags) &&\n        populations[p].tags.includes(tag)\n      ) {\n        filteredPops[p] = populations[p];\n      }\n    }\n    return filteredPops;\n  },\n  firesWithTag: (state, getters) => tag => {\n    const fires = getters.fires;\n    var filteredFires = {};\n    for (const f in fires) {\n      if (Array.isArray(fires[f].tags) && fires[f].tags.includes(tag)) {\n        filteredFires[f] = fires[f];\n      }\n    }\n    return filteredFires;\n  }\n};\n\nconst mutations = {\n  [\"SAVE_SETTINGS\"](state, value) {\n    state.data = value;\n  }\n};\nconst actions = {\n  getConfig({ commit }, url) {\n    fetch(url)\n      .then(res => res.json())\n      .then(json => {\n        commit(\"SAVE_SETTINGS\", json);\n      });\n  }\n};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","// mutation-types.js\n// Represents global mutation triggers that are used throughout the application\n\nexport const START_LOADING = \"START_LOADING\";\nexport const DONE_LOADING = \"DONE_LOADING\";\n\nexport const SET_MAP_INSTANCE = \"SET_MAP_INSTANCE\";\n\nexport const SET_DRAW_INSTANCE = \"SET_DRAW_INSTANCE\";\nexport const SET_MAPBOX_STYLE = \"SET_MAPBOX_STYLE\";\nexport const SETTINGS_VISIBILITY = \"SETTINGS_VISIBILITY\";\n\nexport const SELECT_REGION = \"SELECT_REGION\";\nexport const CLEAR_REGION = \"CLEAR_REGION\";\nexport const FLY_TO = \"FLY_TO\";\nexport const SET_FIRST_SYMBOL_LAYER = \"SET_FIRST_SYMBOL_LAYER\";\n\nexport const MATSIM_ADD_SOURCE = \"MATSIM_ADD_SOURCE\";\nexport const MATSIM_ADD_LAYER = \"MATSIM_ADD_LAYER\";\nexport const MATSIM_SET_BASE_LAYER = \"MATSIM_SET_BASE_LAYER\";\nexport const MATSIM_SET_HIGHLIGHT_LAYER = \"MATSIM_SET_HIGHLIGHT_LAYER\";\nexport const MATSIM_SET_SELECTED_DISRUPTION_LAYER =\n  \"MATSIM_SET_SELECTED_DISRUPTION_LAYER\";\nexport const MATSIM_SET_DISRUPTION_LAYER = \"MATSIM_SET_DISRUPTION_LAYER\";\nexport const MATSIM_ADD_DISRUPTION = \"MATSIMATSIM_ADD_DISRUPTION\";\nexport const MATSIM_SELECT_LINK = \"MATSIM_SELECT_LINK\";\nexport const MATSIM_DESELECT_LINK = \"MATSIM_DESELECT_LINK\";\n\n// simulation setup/playthrough\nexport const MATSIM_SAVE_CONFIG = \"MATSIM_SAVE_CONFIG\";\nexport const MATSIM_SETTINGS_VIS = \"MATSIM_SETTINGS_VIS\";\n\nexport const SELECT_FIRE = \"SELECT_FIRE\";\nexport const CLEAR_FIRE = \"CLEAR_FIRE\";\n\nexport const SELECT_POPULATION = \"SELECT_POPULATION\";\nexport const CLEAR_POPULATION = \"CLEAR_POPULATION\";\n\nexport const POP_ADD_SOURCE = \"POP_ADD_SOURCE\";\nexport const POP_ADD_LAYER = \"POP_ADD_LAYER\";\nexport const POP_ADD_GEOJSON = \"POP_ADD_GEOJSON\";\n\nexport const PHOENIX_ADD_SOURCE = \"PHOENIX_ADD_SOURCE\";\nexport const PHOENIX_ADD_LAYER = \"PHOENIX_ADD_LAYER\";\nexport const PHOENIX_SET_OPACITY = \"PHOENIX_SET_OPACITY\";\nexport const PHOENIX_TIME_STEP = \"PHOENIX_TIME_STEP\";\n\nexport const DRAW_SMOKE = \"DRAW_SMOKE\";\nexport const EMBER_ADD_SOURCE = \"EMBER_ADD_SOURCE\";\nexport const EMBER_ADD_LAYER = \"EMBER_ADD_LAYER\";\nexport const EMBER_SET_OPACITY = \"EMBER_SET_OPACITY\";\nexport const CLEAR_SMOKE = \"CLEAR_SMOKE\";\n\n// used to trigger pitch change, and 3D fire\nexport const TOGGLE_3D = \"TOGGLE_3D\";\n","// Mapbox state\n// Used to store state of map, including layers etc\nimport {\n  START_LOADING,\n  DONE_LOADING,\n  SET_MAP_INSTANCE,\n  SET_DRAW_INSTANCE,\n  SET_MAPBOX_STYLE,\n  SETTINGS_VISIBILITY,\n  SELECT_REGION,\n  CLEAR_REGION,\n  FLY_TO,\n  SET_FIRST_SYMBOL_LAYER,\n  MATSIM_ADD_SOURCE,\n  MATSIM_ADD_LAYER,\n  MATSIM_SET_BASE_LAYER,\n  MATSIM_SET_HIGHLIGHT_LAYER,\n  MATSIM_SET_DISRUPTION_LAYER,\n  MATSIM_SET_SELECTED_DISRUPTION_LAYER,\n  MATSIM_SELECT_LINK,\n  MATSIM_DESELECT_LINK,\n  MATSIM_ADD_DISRUPTION,\n  TOGGLE_3D\n} from \"@/store/mutation-types\";\n\nconst state = {\n  isLoading: 0,\n  mapboxStyle: \"dark\",\n  firstSymbolLayer: null,\n  mapSettingsIsOpen: true,\n  baseMATSimLayer: null,\n  highlightMATSimLayer: null,\n  loadedMATSimLayers: [],\n  loadedMATSimSource: null,\n  selectedRegion: null,\n  populationSquares: [],\n  squarePopulationIsOpen: false,\n  selectedMATSimLink: \"\",\n  disruptions: [],\n  affectedLinkIsOpen: false,\n  mapInstance: null, // MapboxGL object\n  drawInstance: null, // MapboxDraw object\n  mapCenter: [144.968447, -37.818232] // Federeation Square Melbourne\n};\n\nconst getters = {\n  mapInstance: state => state.mapInstance,\n  drawInstance: state => state.drawInstance,\n  selectedStyle: (state, getters, rootState) => {\n    if (!state.mapboxStyle) return null;\n    var styles = rootState.config.styles;\n    var style = styles.find(obj => obj.id === state.mapboxStyle);\n    return style;\n  },\n  selectedRegion: (state, getters, rootState, rootGetters) => {\n    if (!state.selectedRegion) return null;\n    return rootGetters.region(state.selectedRegion);\n  },\n  popInSelectedRegion: (state, getters, rootState, rootGetters) => {\n    if (!state.selectedRegion) return [];\n    return rootGetters.populationsWithTag(getters.selectedRegion.name);\n  },\n  firesInSelectedRegion: (state, getters, rootState, rootGetters) => {\n    if (!state.selectedRegion) return getters.fires;\n    return rootGetters.firesWithTag(getters.selectedRegion.name);\n  }\n};\n\nconst mutations = {\n  [START_LOADING](state) {\n    state.isLoading++;\n  },\n  [DONE_LOADING](state) {\n    if (state.isLoading > 0) state.isLoading--;\n  },\n  [SET_MAP_INSTANCE](state, newMap) {\n    state.mapInstance = newMap;\n  },\n  [SET_DRAW_INSTANCE](state, newDraw) {\n    state.drawInstance = newDraw;\n  },\n  [SET_MAPBOX_STYLE](state, newStyle) {\n    state.mapboxStyle = newStyle;\n    state.mapInstance.setStyle(\n      \"mapbox://styles/mapbox/\" + state.mapboxStyle + \"-v9\"\n    );\n  },\n  [SETTINGS_VISIBILITY](state, newVal) {\n    state.mapSettingsIsOpen = newVal;\n  },\n  [SELECT_REGION](state, newVal) {\n    state.selectedRegion = newVal;\n  },\n  [MATSIM_SET_BASE_LAYER](state, newVal) {\n    state.baseMATSimLayer = newVal;\n  },\n  [MATSIM_SET_HIGHLIGHT_LAYER](state, newVal) {\n    state.highlightMATSimLayer = newVal;\n  },\n  [MATSIM_SET_DISRUPTION_LAYER](state, newVal) {\n    state.disruptionMATSimLayer = newVal;\n  },\n  [MATSIM_SET_SELECTED_DISRUPTION_LAYER](state, newVal) {\n    state.selectedDisruptionMATSimLayer = newVal;\n  },\n  [MATSIM_ADD_DISRUPTION](state, newVal) {\n    state.disruptions.push(newVal);\n  },\n  [FLY_TO](state, target) {\n    state.mapInstance.flyTo({\n      // These options control the ending camera position: centered at\n      // the target, at given zoom level, and north up.\n      center: target,\n      zoom: 8,\n      bearing: 0,\n      // These options control the flight curve, making it move\n      // slowly and zoom out almost completely before starting\n      // to pan.\n      speed: 0.5, // make the flying slow\n      curve: 1, // change the speed at which it zooms out\n\n      // This can be any easing function: it takes a number between\n      // 0 and 1 and returns another number between 0 and 1.\n      easing: function(t) {\n        return t;\n      }\n    });\n    state.mapCenter = target;\n  },\n  [TOGGLE_3D](state, value) {\n    // set the pitch if we are enabling 3D\n    if (value) state.mapInstance.easeTo({ pitch: 60 });\n    else state.mapInstance.easeTo({ pitch: 0 });\n  },\n  [SET_FIRST_SYMBOL_LAYER](state) {\n    var layers = state.mapInstance.getStyle().layers;\n    // Find the index of the first symbol layer in the map style\n    var firstSymbolId;\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].type === \"symbol\" && layers[i].id.includes(\"label\")) {\n        firstSymbolId = layers[i].id;\n        break;\n      }\n    }\n    state.firstSymbolLayer = firstSymbolId;\n  },\n  [MATSIM_ADD_LAYER](state, matsimNetwork) {\n    state.mapInstance.addLayer(\n      {\n        id: matsimNetwork.layerName,\n        type: \"line\",\n        source: matsimNetwork.sourceName,\n        \"source-layer\": matsimNetwork.sourceLayer,\n        minzoom: 0,\n        maxzoom: 22,\n        paint: matsimNetwork.paint,\n        filter: matsimNetwork.filter\n      },\n      // This is the important part of this example: the addLayer\n      // method takes 2 arguments: the layer as an object, and a string\n      // representing another layer's name. if the other layer\n      // exists in the stylesheet already, the new layer will be positioned\n      // right before that layer in the stack, making it possible to put\n      // 'overlays' anywhere in the layer stack.\n      // Insert the layer beneath the first symbol layer.\n      state.firstSymbolLayer\n    );\n    state.loadedMATSimLayers.push(matsimNetwork.layerName);\n  },\n  [MATSIM_ADD_SOURCE](state, matsimNetwork) {\n    state.mapInstance.addSource(matsimNetwork.sourceName, {\n      type: \"vector\",\n      tiles: [matsimNetwork.pbfurl],\n      minzoom: 0,\n      maxzoom: 14\n    });\n    state.loadedMATSimSource = matsimNetwork.sourceName;\n  },\n  [CLEAR_REGION](state) {\n    var map = state.mapInstance;\n    for (const layer of state.loadedMATSimLayers) map.removeLayer(layer);\n    state.loadedMATSimLayers = [];\n\n    if (state.loadedMATSimSource) {\n      map.removeSource(state.loadedMATSimSource);\n      state.loadedMATSimSource = null;\n    }\n    state.baseMATSimLayer = null;\n    state.highlightMATSimLayer = null;\n  },\n  drawPopulationSquare(state) {\n    const map = state.mapInstance;\n    const draw = state.drawInstance;\n    draw.changeMode(\"draw_rectangle\");\n    map.getCanvas().style.cursor = \"crosshair\";\n  },\n  addPopulationSquare(state, feature) {\n    // reset cursor to default\n    state.mapInstance.getCanvas().style.cursor = \"\";\n    state.populationSquares.push(feature);\n    state.squarePopulationIsOpen = true;\n  },\n  setSquarePopulationIsOpen(state, value) {\n    state.squarePopulationIsOpen = value;\n  },\n  [MATSIM_SELECT_LINK](state, value) {\n    state.selectedMATSimLink = value;\n  },\n  [MATSIM_DESELECT_LINK](state) {\n    state.selectedMATSimLink = [];\n  },\n  setAffectedLinkIsOpen(state, value) {\n    state.affectedLinkIsOpen = value;\n  }\n};\n\nconst actions = {\n  toggleSettingsVis({ state, commit }) {\n    commit(SETTINGS_VISIBILITY, !state.mapSettingsIsOpen);\n  },\n  changeMapboxStyle({ commit, dispatch }, style) {\n    // ensure any existing matsim artifacts are removed\n    // by dispatch to all store modules\n    dispatch(\"clearMap\");\n    commit(SET_MAPBOX_STYLE, style);\n  },\n  clearMap({ commit }) {\n    // ensure any existing matsim/fire artifacts are removed\n    commit(CLEAR_REGION);\n  },\n  selectRegion({ dispatch, commit, getters }, value) {\n    commit(SELECT_REGION, value);\n    // load the relevant MATSim layers\n    dispatch(\"clearMap\");\n    dispatch(\"loadLayers\");\n    commit(FLY_TO, getters.selectedRegion.center);\n  },\n  loadLayers({ dispatch, getters }) {\n    var region = getters.selectedRegion;\n    if (!region) return; // no region to be loaded\n\n    var matsimNetwork = {\n      sourceName: \"matsim\",\n      pbfurl: process.env.VUE_APP_EES_TILES_API + region.matsimNetworkTiles,\n      layerName: region.matsimNetworkLayer,\n      sourceLayer: region.matsimNetworkLayer,\n      paint: {\n        \"line-color\": \"#7777ff\",\n        \"line-width\": 0.5\n      },\n      filter: [\"all\"]\n    };\n\n    dispatch(\"loadMATSimNetwork\", matsimNetwork);\n  },\n  loadMATSimNetwork({ commit }, matsimNetwork) {\n    // wake the server and give an indication of loading (experimental)\n    commit(START_LOADING);\n    fetch(process.env.VUE_APP_EES_TILES_API + \"/wake/please\").then(function() {\n      commit(DONE_LOADING); // dont care about the response\n    });\n\n    // load the matsim source\n    commit(MATSIM_ADD_SOURCE, matsimNetwork);\n\n    // create the base matsim layer\n    commit(MATSIM_ADD_LAYER, matsimNetwork);\n    commit(MATSIM_SET_BASE_LAYER, matsimNetwork.layerName);\n\n    // create the highlight layer above this (deep copy)\n    var matsimNetworkHighlighted = JSON.parse(JSON.stringify(matsimNetwork));\n    matsimNetworkHighlighted = Object.assign(matsimNetworkHighlighted, {\n      layerName: matsimNetwork.layerName + \"-highlighted\",\n      paint: {\n        \"line-color\": \"#FF8C00\",\n        \"line-width\": 1.5\n      },\n      filter: [\"in\", \"ID\", \"\"]\n    });\n    commit(MATSIM_ADD_LAYER, matsimNetworkHighlighted);\n    commit(MATSIM_SET_HIGHLIGHT_LAYER, matsimNetworkHighlighted.layerName);\n\n    //Disruptions layer\n    var matsimNetworkHighlightedDisruptions = JSON.parse(\n      JSON.stringify(matsimNetwork)\n    );\n    matsimNetworkHighlightedDisruptions = Object.assign(\n      matsimNetworkHighlightedDisruptions,\n      {\n        layerName: matsimNetwork.layerName + \"-highlightedDisruptions\",\n        paint: {\n          \"line-color\": \"#FF0000\",\n          \"line-width\": 1.5\n        },\n        filter: [\"in\", \"ID\", \"\"]\n      }\n    );\n    commit(MATSIM_ADD_LAYER, matsimNetworkHighlightedDisruptions);\n    commit(\n      MATSIM_SET_DISRUPTION_LAYER,\n      matsimNetworkHighlightedDisruptions.layerName\n    );\n\n    //Selected disruption layer\n    var matsimNetworkSelectedDisruptions = JSON.parse(\n      JSON.stringify(matsimNetwork)\n    );\n    matsimNetworkSelectedDisruptions = Object.assign(\n      matsimNetworkSelectedDisruptions,\n      {\n        layerName: matsimNetwork.layerName + \"-selectedDisruptions\",\n        paint: {\n          \"line-color\": \"#00bfff\",\n          \"line-width\": 1.5\n        },\n        filter: [\"in\", \"ID\", \"\"]\n      }\n    );\n    commit(MATSIM_ADD_LAYER, matsimNetworkSelectedDisruptions);\n    commit(\n      MATSIM_SET_SELECTED_DISRUPTION_LAYER,\n      matsimNetworkSelectedDisruptions.layerName\n    );\n  }\n};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","// Phoenix fire\n// Used to store state of fire geojson and layers\nimport {\n  START_LOADING,\n  DONE_LOADING,\n  SELECT_FIRE,\n  PHOENIX_ADD_SOURCE,\n  PHOENIX_ADD_LAYER,\n  PHOENIX_SET_OPACITY,\n  PHOENIX_TIME_STEP,\n  CLEAR_FIRE,\n  TOGGLE_3D\n} from \"@/store/mutation-types\";\n\nconst state = {\n  fireStepMinutes: 10,\n  selectedFire: null,\n  loadedFireLayers: [],\n  loadedFireSources: [],\n  visibleFireStep: null,\n  fire3DFlameHeight: false,\n  fireOpacity: 0.4,\n  fireIntensityLevels: [[0, \"#ffc107\"], [100000, \"#dc3545\"]]\n};\n\nconst getters = {\n  fireStepMinutes: state => state.fireStepMinutes,\n  visibleFireStep: state => state.visibleFireStep,\n  totalFireLayers: state => state.loadedFireLayers.length,\n  selectedFire: (state, getters) => {\n    var fires = getters.fires;\n    if (state.selectedFire in fires) return fires[state.selectedFire];\n    else return null;\n  },\n  fireIgnitionMinutes: (state, getters) => {\n    var fireData = getters.selectedFire;\n    if (fireData && \"ignition_hhmm\" in fireData)\n      return (\n        parseInt(fireData.ignition_hhmm.slice(0, 2)) * 60 +\n        parseInt(fireData.ignition_hhmm.slice(2))\n      );\n    else return 0;\n  },\n  fireAboveLayer: (state, getters, rootState) => {\n    return rootState.firstSymbolLayer;\n  }\n};\n\nconst mutations = {\n  [SELECT_FIRE](state, newVal) {\n    state.selectedFire = newVal;\n  },\n  [PHOENIX_ADD_SOURCE](state, payload) {\n    var fireSlice = payload.fireSlice;\n    var source = fireSlice.sourceName;\n\n    // setup unique source\n    payload.map.addSource(source, {\n      type: \"geojson\",\n      data: fireSlice.geojson\n    });\n    state.loadedFireSources.push(source);\n  },\n  [PHOENIX_ADD_LAYER](state, payload) {\n    var fireSlice = payload.fireSlice;\n    var layer;\n    if (state.fire3DFlameHeight) {\n      layer = {\n        id: fireSlice.layerName,\n        type: \"fill-extrusion\",\n        source: fireSlice.sourceName,\n        filter: [\"has\", \"FLAME_HT\"],\n        layout: {\n          visibility: \"none\"\n        },\n        paint: {\n          \"fill-extrusion-color\": {\n            property: \"E_INTSTY\",\n            stops: state.fireIntensityLevels\n          },\n          \"fill-extrusion-height\": {\n            property: \"FLAME_HT\",\n            stops: [[0, 1], [300, 1000]]\n          },\n          \"fill-extrusion-base\": 0,\n          \"fill-extrusion-opacity\": state.fireOpacity\n        }\n      };\n    } else {\n      layer = {\n        id: fireSlice.layerName,\n        type: \"fill\",\n        source: fireSlice.sourceName,\n        layout: {\n          visibility: \"none\"\n        },\n        paint: {\n          \"fill-color\": {\n            property: \"E_INTSTY\",\n            stops: state.fireIntensityLevels\n          },\n          \"fill-opacity\": state.fireOpacity\n        }\n      };\n    }\n    payload.map.addLayer(layer, payload.beforeLayer);\n    state.loadedFireLayers.push(fireSlice.layerName);\n  },\n  [PHOENIX_SET_OPACITY](state, value) {\n    state.fireOpacity = value;\n  },\n  [TOGGLE_3D](state, value) {\n    state.fire3DFlameHeight = value;\n  },\n  [CLEAR_FIRE](state, map) {\n    // remove layers\n    for (const layer of state.loadedFireLayers) map.removeLayer(layer);\n    state.loadedFireLayers = [];\n    // remove sources\n    for (const source of state.loadedFireSources) map.removeSource(source);\n    state.loadedFireSources = [];\n    state.visibleFireStep = null;\n  },\n  [PHOENIX_TIME_STEP](state, newVal) {\n    state.visibleFireStep = newVal;\n  }\n};\n\nconst actions = {\n  clearMap({ commit, rootGetters }) {\n    // ensure any existing matsim/fire artifacts are removed\n    commit(CLEAR_FIRE, rootGetters.mapInstance);\n  },\n  loadLayers({ dispatch, getters }) {\n    var selectedFire = getters.selectedFire;\n    if (selectedFire) {\n      dispatch(\"fetchFire\", selectedFire.geojson);\n    }\n  },\n  selectFire({ dispatch, commit, getters }, fire) {\n    commit(SELECT_FIRE, fire);\n    var fireData = getters.selectedFire;\n    dispatch(\n      \"fetchFire\",\n      !fireData ? \"\" : process.env.VUE_APP_EES_TILES_API + \"/\" + fireData.file\n    );\n\n    if (fireData && fireData.smokeGeojson)\n      dispatch(\"drawSmoke\", fireData.smokeGeojson);\n  },\n  fetchFire({ dispatch, commit, getters, rootGetters }, url) {\n    const map = rootGetters.mapInstance;\n    commit(CLEAR_FIRE, map);\n    commit(START_LOADING);\n\n    // download and pre-process the geojson for better performance while rendering\n    // we will build our own sources and layers for each fire step\n    fetch(url)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(geojson) {\n        var features = geojson.features;\n        // first sort\n        features.sort(function(a, b) {\n          if (a.properties.HOUR_BURNT === null) return -1;\n          if (b.properties.HOUR_BURNT === null) return 1;\n          else return a.properties.HOUR_BURNT - b.properties.HOUR_BURNT;\n        });\n        // now we can efficiently set up sources\n        const lastFeature = features[features.length - 1];\n        const totalMinutes = lastFeature.properties.HOUR_BURNT * 60;\n        const totalSteps = Math.ceil(totalMinutes / getters.fireStepMinutes);\n\n        // this will track the geojson features array\n        var j = 0;\n        // skip nulls\n        while (features[j].properties.HOUR_BURNT === null) j++;\n        // generate a geojson object for each step\n        for (var i = 0; i < totalSteps; i++) {\n          // set a threshold\n          var threshold = (i * getters.fireStepMinutes) / 60;\n          // create a fresh geojson structure for this layer\n          var sect = {\n            type: \"FeatureCollection\",\n            features: []\n          };\n\n          // add all features below the minutes threshold to this structure\n          while (features[j].properties.HOUR_BURNT < threshold) {\n            sect.features.push(features[j]);\n            j++;\n          }\n\n          // create this layer\n          var stepStr = i.toString();\n          var layer = \"phoenix-layer\" + stepStr;\n          var source = \"phoenix-source\" + stepStr;\n          commit(PHOENIX_ADD_SOURCE, {\n            map: map,\n            fireSlice: {\n              sourceName: source,\n              geojson: sect\n            }\n          });\n          commit(PHOENIX_ADD_LAYER, {\n            map: map,\n            beforeLayer: getters.fireBeforeLayer,\n            fireSlice: {\n              sourceName: source,\n              layerName: layer\n            }\n          });\n        }\n        dispatch(\n          \"filterFire\",\n          getters.fireIgnitionMinutes / getters.fireStepMinutes + totalSteps - 1\n        ); // load the final fire step\n        commit(DONE_LOADING);\n      });\n  },\n  filterFire({ getters, commit }, fireStep) {\n    var map = getters.mapInstance;\n\n    var fireStartStep = getters.fireIgnitionMinutes / getters.fireStepMinutes;\n\n    // ensure every layer before the current step is on, and every one after is off\n    for (var i = 0; i < getters.totalFireLayers; i++) {\n      var layer = \"phoenix-layer\" + i.toString();\n      if (i + fireStartStep <= fireStep)\n        map.setLayoutProperty(layer, \"visibility\", \"visible\");\n      else map.setLayoutProperty(layer, \"visibility\", \"none\");\n    }\n    commit(PHOENIX_TIME_STEP, fireStep);\n  },\n  resetFireLayers({ dispatch, rootGetters, getters, commit }) {\n    var map = rootGetters.mapInstance;\n    var totalFireLayers = getters.totalFireLayers;\n    var i;\n    var step;\n    var layer;\n\n    // we dont want to clear, just reset each fire layer\n    for (i = 0; i < totalFireLayers; i++) {\n      step = i.toString();\n      layer = \"phoenix-layer\" + step;\n      map.removeLayer(layer);\n    }\n    state.loadedFireLayers = [];\n\n    for (i = 0; i < totalFireLayers; i++) {\n      step = i.toString();\n      var source = \"phoenix-source\" + step;\n      layer = \"phoenix-layer\" + step;\n\n      commit(PHOENIX_ADD_LAYER, {\n        map: map,\n        fireSlice: {\n          sourceName: source,\n          layerName: layer\n        }\n      });\n    }\n    dispatch(\"filterFire\", getters.visibleFireStep);\n  },\n  toggleFireIn3D({ dispatch, state, commit }) {\n    commit(TOGGLE_3D, !state.fire3DFlameHeight);\n    dispatch(\"resetFireLayers\");\n  }\n};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","// Phoenix smoke\n// Used to store state of smoke geojson and layers\n// Smoke data is related to the fire and time slider, therefore we\n// piggyback a number of fire vuex actions here\n\nimport {\n  START_LOADING,\n  DONE_LOADING,\n  DRAW_SMOKE,\n  EMBER_ADD_SOURCE,\n  EMBER_ADD_LAYER,\n  EMBER_SET_OPACITY,\n  CLEAR_SMOKE\n} from \"@/store/mutation-types\";\n\nconst state = {\n  smokeVisible: false,\n  loadedSmokeLayers: [],\n  loadedSmokeSources: [],\n  smokeOpacity: 0.4,\n  smokeIntensityLevels: [[0, \"#333333\"], [100000, \"#000000\"]]\n};\n\nconst getters = {\n  totalSmokeLayers: state => state.loadedSmokeLayers.length\n};\n\nconst mutations = {\n  [DRAW_SMOKE](state, newVal) {\n    state.smokeVisible = newVal;\n  },\n  [EMBER_ADD_SOURCE](state, payload) {\n    var smokeSlice = payload.smokeSlice;\n    var source = smokeSlice.sourceName;\n\n    // setup unique source\n    payload.map.addSource(source, {\n      type: \"geojson\",\n      data: smokeSlice.geojson\n    });\n    state.loadedSmokeSources.push(source);\n  },\n  [EMBER_ADD_LAYER](state, payload) {\n    var smokeSlice = payload.smokeSlice;\n    var layer;\n    layer = {\n      id: smokeSlice.layerName,\n      type: \"fill\",\n      source: smokeSlice.sourceName,\n      layout: {\n        visibility: \"none\"\n      },\n      paint: {\n        \"fill-color\": {\n          property: \"E_INTSTY\",\n          stops: state.smokeIntensityLevels\n        },\n        \"fill-opacity\": state.smokeOpacity\n      }\n    };\n\n    payload.map.addLayer(layer, payload.beforeLayer);\n    state.loadedSmokeLayers.push(smokeSlice.layerName);\n  },\n  [EMBER_SET_OPACITY](state, value) {\n    state.smokeOpacity = value;\n  },\n  [CLEAR_SMOKE](state, map) {\n    // remove layers\n    for (const layer of state.loadedSmokeLayers) map.removeLayer(layer);\n    state.loadedSmokeLayers = [];\n    // remove sources\n    for (const source of state.loadedSmokeSources) map.removeSource(source);\n    state.loadedSmokeSources = [];\n  }\n};\n\nconst actions = {\n  clearMap({ commit, rootGetters }) {\n    // ensure any existing smoke artifacts are removed\n    commit(CLEAR_SMOKE, rootGetters.mapInstance);\n  },\n  loadLayers({ dispatch }) {\n    dispatch(\"drawSmoke\");\n  },\n  fetchSmoke({ dispatch, commit, getters, rootGetters }, url) {\n    const map = rootGetters.mapInstance;\n    commit(CLEAR_SMOKE, map);\n    commit(START_LOADING);\n\n    // download and pre-process the geojson for better performance while rendering\n    // we will build our own sources and layers for each smoke step\n    fetch(url)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(geojson) {\n        var features = geojson.features;\n        // first sort\n        features.sort(function(a, b) {\n          if (a.properties.hour_spot === null) return -1;\n          if (b.properties.hour_spot === null) return 1;\n          else return a.properties.hour_spot - b.properties.hour_spot;\n        });\n        // now we can efficiently set up sources\n        const lastFeature = features[features.length - 1];\n        const totalMinutes = lastFeature.properties.hour_spot * 60;\n        const totalSteps = Math.ceil(\n          totalMinutes / rootGetters.fireStepMinutes\n        );\n\n        // this will track the geojson features array\n        var j = 0;\n        // skip nulls\n        while (features[j].properties.hour_spot === null) j++;\n        // generate a geojson object for each step\n        for (var i = 0; i < totalSteps; i++) {\n          // set a threshold\n          var threshold = (i * rootGetters.fireStepMinutes) / 60;\n          // create a fresh geojson structure for this layer\n          var sect = {\n            type: \"FeatureCollection\",\n            features: []\n          };\n\n          // add all features below the minutes threshold to this structure\n          while (features[j].properties.hour_spot < threshold) {\n            sect.features.push(features[j]);\n            j++;\n          }\n\n          // create this layer\n          var stepStr = i.toString();\n          var layer = \"ember-layer\" + stepStr;\n          var source = \"ember-source\" + stepStr;\n          commit(EMBER_ADD_SOURCE, {\n            map: map,\n            smokeSlice: {\n              sourceName: source,\n              geojson: sect\n            }\n          });\n          commit(EMBER_ADD_LAYER, {\n            map: map,\n            beforeLayer: getters.smokeBeforeLayer,\n            smokeSlice: {\n              sourceName: source,\n              layerName: layer\n            }\n          });\n        }\n        dispatch(\"filterFire\", rootGetters.visibleFireStep); // load the final smoke step\n        commit(DONE_LOADING);\n      });\n  },\n  drawSmoke({ state, dispatch, rootGetters }) {\n    // called by selectFire after selecting a fire\n    // we have the smoke data for this fire\n    var selectedFire = rootGetters.selectedFire;\n    // check there is a fire selected and we want smoke to be visible\n    if (selectedFire && selectedFire.smokeGeojson && state.smokeVisible) {\n      dispatch(\"fetchSmoke\", selectedFire.smokeGeojson);\n    }\n  },\n  filterFire({ getters }, smokeStep) {\n    var map = getters.mapInstance;\n\n    // ensure every layer before the current step is on, and every one after is off\n    for (var i = 0; i < getters.totalSmokeLayers; i++) {\n      var layer = \"ember-layer\" + i.toString();\n      if (i <= smokeStep) map.setLayoutProperty(layer, \"visibility\", \"visible\");\n      else map.setLayoutProperty(layer, \"visibility\", \"none\");\n    }\n  },\n  resetFireLayers({ dispatch, rootGetters, getters, commit }) {\n    var map = rootGetters.mapInstance;\n    var totalSmokeLayers = getters.totalSmokeLayers;\n    var i;\n    var step;\n    var layer;\n\n    // we dont want to clear, just reset each smoke layer\n    for (i = 0; i < totalSmokeLayers; i++) {\n      step = i.toString();\n      layer = \"ember-layer\" + step;\n      map.removeLayer(layer);\n    }\n    state.loadedSmokeLayers = [];\n\n    for (i = 0; i < totalSmokeLayers; i++) {\n      step = i.toString();\n      var source = \"ember-source\" + step;\n      layer = \"ember-layer\" + step;\n\n      commit(EMBER_ADD_LAYER, {\n        map: map,\n        smokeSlice: {\n          sourceName: source,\n          layerName: layer\n        }\n      });\n    }\n    dispatch(\"filterFire\", rootGetters.visibleFireStep);\n  }\n};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","// Population plans\n// Used to store state of fire geojson and layers\nimport {\n  START_LOADING,\n  DONE_LOADING,\n  SELECT_POPULATION,\n  POP_ADD_SOURCE,\n  POP_ADD_GEOJSON,\n  POP_ADD_LAYER,\n  CLEAR_POPULATION\n} from \"@/store/mutation-types\";\n\nconst state = {\n  selectedPopulation: null,\n  loadedPopLayers: [],\n  loadedPopSources: [],\n  populationGeojson: []\n};\n\nconst getters = {\n  selectedPopulation: (state, getters) => {\n    var pops = getters.populations;\n    if (!pops) return null;\n\n    if (state.selectedPopulation in pops) return pops[state.selectedPopulation];\n    else return null;\n  },\n  totalPopLayers: state => state.loadedPopLayers.length,\n  popAboveLayer: (state, getters, rootState) => {\n    return rootState.firstSymbolLayer;\n  }\n};\n\nconst mutations = {\n  [SELECT_POPULATION](state, newVal) {\n    state.selectedPopulation = newVal;\n  },\n  [POP_ADD_SOURCE](state, payload) {\n    var popSlice = payload.popSlice;\n    var source = popSlice.sourceName;\n\n    // setup unique source\n    payload.map.addSource(source, {\n      type: \"geojson\",\n      data: popSlice.geojson\n    });\n    state.loadedPopSources.push(source);\n  },\n  [POP_ADD_LAYER](state, payload) {\n    var popSlice = payload.popSlice;\n    var layer;\n    layer = {\n      id: popSlice.layerName,\n      type: \"circle\",\n      source: popSlice.sourceName,\n      paint: {\n        \"circle-radius\": {\n          base: 1.75,\n          stops: [[12, 2], [22, 180]]\n        },\n        \"circle-color\": {\n          type: \"identity\",\n          property: \"color\"\n        }\n      }\n    };\n\n    payload.map.addLayer(layer, payload.beforeLayer);\n    state.loadedPopLayers.push(popSlice.layerName);\n  },\n  [POP_ADD_GEOJSON](state, payload) {\n    state.populationGeojson.push(payload);\n  },\n  [CLEAR_POPULATION](state, map) {\n    // remove layers\n    for (const layer of state.loadedPopLayers) map.removeLayer(layer);\n    state.loadedPopLayers = [];\n    // remove sources\n    for (const source of state.loadedPopSources) map.removeSource(source);\n    state.loadedPopSources = [];\n\n    // remove animation states\n    state.populationGeojson = [];\n  }\n};\n\nconst actions = {\n  clearMap({ commit, rootGetters }) {\n    // ensure any existing matsim/fire artifacts are removed\n    commit(CLEAR_POPULATION, rootGetters.mapInstance);\n  },\n  loadLayers({ dispatch, getters }) {\n    var selectedPopulation = getters.selectedPopulation;\n    if (selectedPopulation) {\n      dispatch(\"fetchPopulation\", selectedPopulation.data);\n    }\n  },\n  selectPopulation({ dispatch, commit, getters }, pop) {\n    commit(SELECT_POPULATION, pop);\n    var popData = getters.selectedPopulation;\n    dispatch(\n      \"fetchPopulation\",\n      !popData ? \"\" : process.env.VUE_APP_EES_TILES_API + \"/\" + popData.file\n    );\n  },\n  fetchPopulation({ dispatch, commit, rootGetters }, url) {\n    const map = rootGetters.mapInstance;\n    commit(CLEAR_POPULATION, map);\n    commit(START_LOADING);\n\n    window.populationGeojson = [];\n\n    // download and pre-process the geojson for better performance while rendering\n    // we will build our own sources and layers for each fire step\n    fetch(url)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(json) {\n        // json is sorted by end_time\n        // we can efficiently set up sources\n        const lastFeature = json[json.length - 1];\n        const totalMinutes = lastFeature.end_hr * 60;\n        const totalSteps = Math.ceil(\n          totalMinutes / rootGetters.fireStepMinutes\n        );\n\n        var activityColors = {\n          home: \"#fbb03b\",\n          work: \"#223b53\",\n          beach: \"#e55e5e\",\n          shops: \"#3bb2d0\",\n          other: \"#ccc\"\n        };\n\n        var whereareyounow = {};\n\n        // a first sweep to determine where everyone starts\n        for (const plan of json) {\n          if (!(plan.id in whereareyounow)) {\n            whereareyounow[plan.id] = plan;\n          }\n        }\n\n        // this will track the geojson features array\n        var j = 0;\n        // skip nulls\n        // generate a geojson object for each step\n        for (var i = 0; i < totalSteps; i++) {\n          // set a threshold\n          var threshold = (i * rootGetters.fireStepMinutes) / 60;\n\n          // add all features below the minutes threshold to this structure\n          while (json[j].end_hr < threshold) {\n            whereareyounow[json[j].id] = json[j];\n            j++;\n          }\n\n          // create a fresh geojson structure for this layer\n          var sect = {\n            type: \"FeatureCollection\",\n            features: []\n          };\n\n          // we know the state of everyone at this time, create a feature for each person\n          for (const k of Object.keys(whereareyounow)) {\n            var feature = {\n              type: \"Feature\",\n              properties: {\n                person: whereareyounow[k].id,\n                end_hr: whereareyounow[k].end_hr,\n                type: whereareyounow[k].type,\n                color: activityColors[whereareyounow[k].type]\n              },\n              geometry: {\n                type: \"Point\",\n                coordinates: [whereareyounow[k].x, whereareyounow[k].y]\n              }\n            };\n            sect.features.push(feature);\n          }\n\n          window.populationGeojson.push(sect);\n          // save this data for animation later\n          //commit(POP_ADD_GEOJSON, sect);\n        }\n\n        // create a single layer to conduct animation in\n        var layer = \"pop-layer\";\n        var source = \"pop-source\";\n        commit(POP_ADD_SOURCE, {\n          map: map,\n          popSlice: {\n            sourceName: source,\n            geojson: window.populationGeojson[0]\n          }\n        });\n        commit(POP_ADD_LAYER, {\n          map: map,\n          beforeLayer: rootGetters.fireBeforeLayer,\n          popSlice: {\n            sourceName: source,\n            layerName: layer\n          }\n        });\n        dispatch(\"filterFire\", totalSteps - 1); // load the final fire step\n        commit(DONE_LOADING);\n      });\n  },\n  filterFire({ getters }, fireStep) {\n    var map = getters.mapInstance;\n\n    const s = map.getSource(\"pop-source\");\n    if (typeof s !== \"undefined\") {\n      s.setData(window.populationGeojson[fireStep]);\n    }\n  },\n  resetFireLayers({ rootGetters, getters, commit }) {\n    var map = rootGetters.mapInstance;\n    var totalFireLayers = getters.totalPopLayers;\n    var i;\n    var layer;\n\n    // we dont want to clear, just reset each fire layer\n    for (i = 0; i < totalFireLayers; i++) {\n      layer = \"pop-layer\";\n      map.removeLayer(layer);\n    }\n    state.loadedPopLayers = [];\n\n    for (i = 0; i < totalFireLayers; i++) {\n      var source = \"pop-source\";\n      layer = \"pop-layer\";\n\n      commit(POP_ADD_LAYER, {\n        map: map,\n        popSlice: {\n          sourceName: source,\n          layerName: layer\n        }\n      });\n    }\n  }\n};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","// simulation state\nimport {\n  MATSIM_SAVE_CONFIG,\n  MATSIM_SETTINGS_VIS\n} from \"@/store/mutation-types\";\n\nconst state = {\n  savedSettingsJson: null,\n  simulationName: null,\n  simSettingsIsOpen: false\n};\n\nconst getters = {};\n\nconst mutations = {\n  [MATSIM_SAVE_CONFIG](state, value) {\n    state.savedSettingsJson = value;\n\n    fetch(process.env.VUE_APP_EES_TILES_API + \"/save-settings\", {\n      method: \"POST\",\n      body: JSON.stringify(value),\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    })\n      .then(response => response)\n      .then(result => {\n        if (result.details) {\n          // there was an error...\n          const error = result.details.map(detail => detail.message).join(\". \");\n          console.log(error);\n        } else {\n          console.log(result);\n        }\n      });\n  },\n  [MATSIM_SETTINGS_VIS](state, value) {\n    state.simSettingsIsOpen = value;\n  },\n  setSimulationName(state, value) {\n    state.simulationName = value;\n  }\n};\n\nconst actions = {};\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};\n","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport config from \"./modules/config\";\nimport map from \"./modules/map\";\nimport fire from \"./modules/fire\";\nimport smoke from \"./modules/smoke\";\nimport population from \"./modules/population\";\nimport simulation from \"./modules/simulation\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  modules: {\n    config,\n    map,\n    fire,\n    smoke,\n    population,\n    simulation\n  }\n});\n","<template>\n  <mapbox\n    :access-token=\"mapboxAccessToken\"\n    :map-options=\"mapOpts\"\n    :geolocate-control=\"{\n      show: true,\n      position: 'top-right'\n    }\"\n    :scale-control=\"{\n      show: true,\n      position: 'bottom-left'\n    }\"\n    @map-load=\"storeMapInstance\"\n  ></mapbox>\n</template>\n\n<script>\nimport Mapbox from \"mapbox-gl-vue\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxDraw from \"@mapbox/mapbox-gl-draw\";\nimport DrawRectangle from \"mapbox-gl-draw-rectangle-mode\";\n\nimport store from \"@/store\";\nimport {\n  SET_MAP_INSTANCE,\n  SET_DRAW_INSTANCE,\n  SET_FIRST_SYMBOL_LAYER,\n  MATSIM_SELECT_LINK,\n  MATSIM_DESELECT_LINK\n} from \"@/store/mutation-types\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"maplayer\",\n  data: function() {\n    return {\n      disruptionSelected: false\n    };\n  },\n  computed: {\n    ...mapState({\n      mapboxAccessToken: state => state.config.mapboxAccessToken,\n      mapboxStyle: state => state.map.mapboxStyle,\n      mapCenter: state => state.map.mapCenter,\n      mapInstance: state => state.map.mapInstance,\n      baseMATSimLayer: state => state.map.baseMATSimLayer,\n      highlightMATSimLayer: state => state.map.highlightMATSimLayer,\n      disruptionMATSimLayer: state => state.map.disruptionMATSimLayer,\n      selectedDisruptionMATSimLayer: state =>\n        state.map.selectedDisruptionMATSimLayer\n    }),\n    mapOpts() {\n      var opts = {\n        style: \"mapbox://styles/mapbox/\" + this.mapboxStyle + \"-v9\",\n        center: this.mapCenter,\n        minZoom: 0,\n        zoom: 6,\n        maxZoom: 18\n      };\n      return opts;\n    }\n  },\n  components: {\n    mapbox: Mapbox\n  },\n  methods: {\n    storeMapInstance(map) {\n      map.on(\"click\", this.mapOnClick);\n      map.on(\"draw.create\", this.squareCreated);\n      map.on(\"style.load\", this.loadLayersOnStyleChange);\n\n      const draw = new MapboxDraw({\n        displayControlsDefault: false,\n        modes: Object.assign(\n          { draw_rectangle: DrawRectangle },\n          MapboxDraw.modes\n        )\n      });\n      // mobile support: we cant add the control until we actually want to draw\n      // https://github.com/agentsoz/ees-ui/issues/9\n      // https://github.com/mapbox/mapbox-gl-draw/issues/617\n      // Hacky Fix: https://github.com/cityofaustin/dockless/issues/48\n      map.addControl(draw);\n\n      store.commit(SET_MAP_INSTANCE, map);\n      store.commit(SET_DRAW_INSTANCE, draw);\n\n      store.commit(SET_FIRST_SYMBOL_LAYER);\n    },\n    loadLayersOnStyleChange() {\n      store.commit(SET_FIRST_SYMBOL_LAYER);\n      store.dispatch(\"loadLayers\");\n    },\n    squareCreated(e) {\n      var feature = e.features[0];\n      store.commit(\"addPopulationSquare\", feature);\n    },\n    mapOnClick(e) {\n      //List of Links\n      var linkList =\n        store.state.map.selectedMATSimLink == \"\"\n          ? []\n          : store.state.map.selectedMATSimLink;\n      // set bbox as 5px reactangle area around clicked point\n      var bbox = [\n        [e.point.x - 5, e.point.y - 5],\n        [e.point.x + 5, e.point.y + 5]\n      ];\n      var features = this.mapInstance.queryRenderedFeatures(bbox, {\n        layers: [this.baseMATSimLayer]\n      });\n\n      var filter;\n\n      if (typeof features != \"undefined\" && features.length !== 0) {\n        var coordinates = features[0].geometry.coordinates.slice()[0][0];\n        var id = features[0].properties.ID;\n\n        const filteredItems = linkList.filter(item => item !== id);\n        if (linkList.length != filteredItems.length) {\n          linkList = filteredItems;\n        } else {\n          linkList.push(id);\n        }\n        var selectedDisruptionLinks = [];\n        var popupText = \"<strong>Link</strong>: \" + id;\n        var linksIsDisrupted = false;\n\n        linkList.forEach(link => {\n          store.state.map.disruptions.forEach(disruption => {\n            //Check if selected link is disrupted.\n            if (disruption.affectedLinks.includes(id)) {\n              linksIsDisrupted = true;\n              store.commit(MATSIM_SELECT_LINK, [id]);\n              linkList = store.state.map.selectedMATSimLink;\n              this.disruptionSelected = true;\n              if (linksIsDisrupted) {\n                var speedUnit = disruption.absoluteSpeed ? \" km/h\" : \"% Slower\";\n                popupText +=\n                  \"<br><strong>Description</strong>: \" +\n                  disruption.description +\n                  \"<br><strong>Time</strong>: \" +\n                  disruption.start +\n                  \"-\" +\n                  disruption.end +\n                  \"<br><strong>Speed</strong>: \" +\n                  disruption.speed +\n                  speedUnit +\n                  \"<br><strong>Affected Links: </strong>:<br>\";\n                selectedDisruptionLinks = disruption.affectedLinks;\n                disruption.affectedLinks.forEach(link => {\n                  popupText += link + \"<br>\";\n                });\n              }\n            }\n          });\n\n          if (this.disruptionSelected && linksIsDisrupted == false) {\n            store.commit(MATSIM_SELECT_LINK, [id]);\n            linkList = store.state.map.selectedMATSimLink;\n            this.disruptionSelected = false;\n          }\n        });\n\n        //console.log(\"features:%s\\n\", JSON.stringify(features));\n        filter = features.reduce(\n          function(memo, feature) {\n            if (!linksIsDisrupted) {\n              linkList.forEach(link => {\n                memo.push(link);\n              });\n            } else {\n              selectedDisruptionLinks.forEach(link => {\n                memo.push(link);\n              });\n            }\n            return memo;\n          },\n          [\"in\", \"ID\"]\n        );\n\n        new mapboxgl.Popup()\n          .setLngLat(coordinates)\n          .setHTML(popupText)\n          .addTo(this.mapInstance);\n\n        // this is displayed as the current link id in the menu\n        store.commit(MATSIM_SELECT_LINK, linkList);\n      } else {\n        filter = [\"in\", \"ID\", \"\"];\n        store.commit(MATSIM_DESELECT_LINK, linkList);\n      }\n\n      var disruptedFilter = [\"in\", \"ID\", \"\"];\n      var highlightFilter = [\"in\", \"ID\", \"\"];\n      linksIsDisrupted\n        ? (disruptedFilter = filter)\n        : (highlightFilter = filter);\n\n      this.mapInstance.setFilter(\n        this.selectedDisruptionMATSimLayer,\n        disruptedFilter\n      );\n      this.mapInstance.setFilter(this.highlightMATSimLayer, highlightFilter);\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"css\">\n#map {\n  position: relative;\n  text-align: left;\n  top: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=7f1ee154&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=7f1ee154&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f1ee154\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visibleFireStep || _vm.visibleFireStep === 0)?_c('div',{staticClass:\"time-slider-overlay\"},[_c('div',{staticClass:\"time-slider-overlay-inner\"},[_c('vue-slider',_vm._b({ref:\"fireslider\",attrs:{\"marks\":_vm.hasLabel,\"tooltip\":'always',\"tooltip-formatter\":_vm.stepToTime,\"use-keyboard\":true},scopedSlots:_vm._u([{key:\"label\",fn:function(ref){\nvar active = ref.active;\nvar value = ref.value;\nreturn [_c('div',{class:['vue-slider-mark-label', 'custom-label', { active: active }]},[_vm._v(\"\\n          \"+_vm._s(_vm.stepToTime(value))+\"\\n        \")])]}}],null,false,3544431226),model:{value:(_vm.timeStep),callback:function ($$v) {_vm.timeStep=$$v},expression:\"timeStep\"}},'vue-slider',_vm.sliderConfig,false))],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-if=\"visibleFireStep || visibleFireStep === 0\"\n    class=\"time-slider-overlay\"\n  >\n    <div class=\"time-slider-overlay-inner\">\n      <vue-slider\n        ref=\"fireslider\"\n        v-bind=\"sliderConfig\"\n        v-model=\"timeStep\"\n        :marks=\"hasLabel\"\n        :tooltip=\"'always'\"\n        :tooltip-formatter=\"stepToTime\"\n        :use-keyboard=\"true\"\n      >\n        <template v-slot:label=\"{ active, value }\">\n          <div :class=\"['vue-slider-mark-label', 'custom-label', { active }]\">\n            {{ stepToTime(value) }}\n          </div>\n        </template>\n      </vue-slider>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\nimport { mapState, mapGetters } from \"vuex\";\n\nexport default {\n  name: \"mapSlider\",\n  components: { VueSlider },\n  props: {},\n  data: function() {\n    var ls = []; // label step size\n    ls[\"sm\"] = 6 * 6;\n    ls[\"md\"] = 6 * 4;\n    ls[\"lg\"] = 6;\n    return {\n      labelStep: ls\n    };\n  },\n  computed: {\n    ...mapState({\n      fireStepMinutes: state => state.fire.fireStepMinutes,\n      visibleFireStep: state => state.fire.visibleFireStep,\n      fireSliderTicks: state => state.fire.fireSliderTicks\n    }),\n    ...mapGetters([\"totalFireLayers\"]),\n    sliderConfig() {\n      return {\n        width: \"98%\",\n        value: this.visibleFireStep ? this.visibleFireStep : 0,\n        min: 0,\n        max: this.maxSteps\n      };\n    },\n    timeStep: {\n      get() {\n        return this.visibleFireStep;\n      },\n      set(val) {\n        this.$store.dispatch(\"filterFire\", val);\n      }\n    },\n    maxSteps() {\n      return (24 * 60) / this.fireStepMinutes;\n    }\n  },\n  methods: {\n    hasLabel(timeStep) {\n      var interval = this.labelStep[this.$mq];\n      var notTooClose = timeStep < this.maxSteps - interval + 1;\n      return (\n        (timeStep % interval === 0 && notTooClose) ||\n        timeStep === this.maxSteps - 1\n      );\n    },\n    stepToTime(timeStep) {\n      return (\n        Math.floor((timeStep * 10) / 60).toString() +\n        \":\" +\n        ((timeStep * 10) % 60).toString().padStart(2, \"0\")\n      );\n    }\n  }\n};\n</script>\n\n<style>\n.time-slider-overlay {\n  position: absolute;\n  width: 88%;\n  bottom: 2.5%;\n  right: 0;\n  height: auto;\n  overflow: visible;\n  padding: 0 0 0 0;\n  margin: 0 0 0 0;\n  z-index: 100;\n}\n\n.time-slider-overlay .time-slider-overlay-inner {\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  padding: 0 1em 1.5em 2em;\n  margin-bottom: 10px;\n  overflow: visible;\n}\n.vue-slider-process {\n  background-color: rgb(16, 102, 253);\n}\n.vue-slider-dot-tooltip-inner {\n  background-color: rgb(16, 102, 253);\n}\n.vue-slider-dot-tooltip-inner:after {\n  border-top-color: rgb(16, 102, 253);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTimeSlider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTimeSlider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapTimeSlider.vue?vue&type=template&id=5a0ddda4&\"\nimport script from \"./MapTimeSlider.vue?vue&type=script&lang=js&\"\nexport * from \"./MapTimeSlider.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapTimeSlider.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-settings-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"map-overlay\"},[_c('div',{staticClass:\"map-population-panel\"},[_c('label',{attrs:{\"for\":\"map-population\"}},[_vm._v(\"Population inside square:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.squarePopulation),expression:\"squarePopulation\"}],attrs:{\"id\":\"map-population\",\"type\":\"text\"},domProps:{\"value\":(_vm.squarePopulation)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.squarePopulation=$event.target.value}}}),_c('button',{staticClass:\"icon\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggle()}}},[_vm._v(\"Save\")])])]),_c('div',{attrs:{\"id\":\"map-link-panel\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"map-settings-container\">\n    <div class=\"map-overlay\" v-show=\"isOpen\">\n      <div class=\"map-population-panel\">\n        <label for=\"map-population\">Population inside square:</label>\n        <input id=\"map-population\" type=\"text\" v-model=\"squarePopulation\" />\n        <button class=\"icon\" type=\"button\" @click=\"toggle()\">Save</button>\n      </div>\n    </div>\n    <div id=\"map-link-panel\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"mapSquarePopulation\",\n  props: {\n    squarePopulation: {\n      default: 0,\n      type: Number\n    }\n  },\n  computed: {\n    isOpen: {\n      get() {\n        return this.$store.state.map.squarePopulationIsOpen;\n      },\n      set(value) {\n        this.$store.commit(\"setSquarePopulationIsOpen\", value);\n      }\n    }\n  },\n  methods: {\n    toggle: function() {\n      this.$store.commit(\n        \"setSquarePopulationIsOpen\",\n        !this.$store.state.map.squarePopulationIsOpen\n      );\n    }\n  }\n};\n</script>\n\n<style>\n.map-settings-panel select {\n  text-align: center;\n}\n\n.map-settings-button-container {\n  padding-top: 150px;\n}\n\n.map-settings-panel {\n}\n\n.map-overlay {\n  font: bold 12px/20px \"Helvetica Neue\", Arial, Helvetica, sans-serif;\n  position: absolute;\n  width: 40%;\n  top: 10%;\n  right: 30%;\n  height: auto;\n  overflow: auto;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 0 20px 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 5px;\n  z-index: 100;\n}\n\n.map-overlay label {\n  display: block;\n  margin: 10px 0 0 0;\n}\n\n.map-overlay input {\n  display: inline-block;\n  width: 100%;\n  position: relative;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSquarePopulation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSquarePopulation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapSquarePopulation.vue?vue&type=template&id=0905d788&\"\nimport script from \"./MapSquarePopulation.vue?vue&type=script&lang=js&\"\nexport * from \"./MapSquarePopulation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapSquarePopulation.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isLoading !== 0)?_c('div',{staticClass:\"load-spinner-overlay\"},[_vm._m(0)]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"load-spinner-overlay-inner\"},[_c('span',{staticClass:\"loading\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"isLoading !== 0\" class=\"load-spinner-overlay\">\n    <div class=\"load-spinner-overlay-inner\">\n      <span class=\"loading\"></span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"mapSpinner\",\n  props: {},\n  computed: {\n    ...mapState({\n      isLoading: state => state.map.isLoading\n    })\n  }\n};\n</script>\n\n<style>\n.load-spinner-overlay {\n  position: absolute;\n  bottom: 100px;\n  right: 30px;\n  height: auto;\n  overflow: visible;\n  padding: 0 0 0 0;\n  margin: 0 0 0 0;\n  z-index: 100;\n}\n\n.load-spinner-overlay .load-spinner-overlay-inner {\n  margin-bottom: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapLoadSpinner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapLoadSpinner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapLoadSpinner.vue?vue&type=template&id=1282546e&\"\nimport script from \"./MapLoadSpinner.vue?vue&type=script&lang=js&\"\nexport * from \"./MapLoadSpinner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapLoadSpinner.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n    this.$store.state.map.mapInstance != null &&\n      this.$store.state.map.mapSettingsIsOpen\n  ),expression:\"\\n    this.$store.state.map.mapInstance != null &&\\n      this.$store.state.map.mapSettingsIsOpen\\n  \"}],staticClass:\"p-0 h-100 mapboxgl-ctrl-top-left map-sidebar-container\",attrs:{\"fluid\":\"\"}},[_c('b-row',{staticClass:\"h-100\",attrs:{\"no-gutters\":\"\"}},[_c('b-col',{staticClass:\"h-100 m-0 mapboxgl-ctrl map-sidebar-col\",attrs:{\"sm\":\"5\"}},[_c('div',{attrs:{\"id\":\"h-100 nav\"}},[_c('h5',[_vm._v(\"Emergency Evacuation Simulator\")]),_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Home\")]),_vm._v(\" |\\n        \"),_c('router-link',{attrs:{\"to\":\"/about\"}},[_vm._v(\"About\")])],1),_c('b-collapse',{staticClass:\"h-100\",attrs:{\"visible\":\"\",\"id\":\"collapse-side-panel\"}},[_c('div',{staticClass:\"h-100 map-accordion-container\"},[_c('b-card',{staticClass:\"mb-1 p-0\",attrs:{\"header\":\"Scenario\"}},[_c('b-form-group',{attrs:{\"label-cols-sm\":\"12\",\"label-cols-lg\":\"4\",\"label\":\"Region\",\"label-for\":\"map-region\"}},[_c('b-form-select',{attrs:{\"id\":\"map-region\"},model:{value:(_vm.selectedRegion),callback:function ($$v) {_vm.selectedRegion=$$v},expression:\"selectedRegion\"}},[_c('option',{attrs:{\"value\":\"no-region\",\"text\":\"no-region\",\"disabled\":\"\"}}),_vm._l((_vm.regions),function(r,id){return _c('option',{key:id,attrs:{\"disabled\":_vm.selectedRegion == id},domProps:{\"value\":id}},[_vm._v(_vm._s(r.name))])})],2)],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"12\",\"label-cols-lg\":\"4\",\"label\":\"Population\",\"label-for\":\"map-population\"}},[_c('b-form-select',{attrs:{\"id\":\"map-population\"},model:{value:(_vm.selectedPopulation),callback:function ($$v) {_vm.selectedPopulation=$$v},expression:\"selectedPopulation\"}},[_c('option',{attrs:{\"value\":\"no-population\",\"text\":\"no-population\",\"disabled\":\"\"}}),_vm._l((_vm.popInSelectedRegion),function(p,id){return _c('option',{key:id,attrs:{\"disabled\":_vm.selectedFire == id},domProps:{\"value\":id}},[_vm._v(_vm._s(p.display_name))])})],2)],1)],1),_c('b-card',{staticClass:\"mb-1\",scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h6',{staticClass:\"mb-0\"},[_vm._v(\"\\n                Emergency Incident\\n                \"),_c('span',{staticClass:\"helper-icons\"},[_c('FontAwesomeIcon',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover\",value:(_vm.helperOptions[0].text),expression:\"helperOptions[0].text\",modifiers:{\"hover\":true}}],attrs:{\"icon\":\"info-circle\"}})],1)])]},proxy:true}])},[_c('b-collapse',{attrs:{\"visible\":\"\",\"id\":\"collapse-incident\"}},[_c('b-form',{attrs:{\"inline\":\"\"}},[_c('b-form-select',{attrs:{\"id\":\"map-fire\"},model:{value:(_vm.selectedFire),callback:function ($$v) {_vm.selectedFire=$$v},expression:\"selectedFire\"}},[_c('option',{attrs:{\"value\":\"no-fire\",\"disabled\":\"\"}}),_vm._l((_vm.firesInSelectedRegion),function(f,id){return _c('option',{key:id,attrs:{\"disabled\":_vm.selectedFire == id},domProps:{\"value\":id}},[_vm._v(_vm._s(f.display_name))])})],2),_c('b-form-checkbox',{staticClass:\"form-check-input\",attrs:{\"disabled\":this.$store.state.fire.selectedFire == null},model:{value:(_vm.showSmoke),callback:function ($$v) {_vm.showSmoke=$$v},expression:\"showSmoke\"}},[_vm._v(\"Display Embers\\n                \")])],1)],1)],1),_c('MapTrafficBehaviourCard',{attrs:{\"helpText\":_vm.helperOptions[3].text,\"trafficSpeed\":100}}),_c('b-card',{staticClass:\"mb-1\",attrs:{\"header\":\"UI Settings\"}},[_c('b-collapse',{attrs:{\"visible\":\"\",\"id\":\"collapse-map-style\"}},[_c('b-form',[_c('b-form-group',{attrs:{\"label-cols-sm\":\"12\",\"label-cols-lg\":\"8\",\"label\":\"Map Style\",\"label-for\":\"map-style\"}},[_c('b-form-select',{attrs:{\"id\":\"map-style\"},model:{value:(_vm.mapboxStyle),callback:function ($$v) {_vm.mapboxStyle=$$v},expression:\"mapboxStyle\"}},_vm._l((_vm.styles),function(style){return _c('option',{key:style.id,attrs:{\"disabled\":_vm.mapboxStyle.id == style.id},domProps:{\"value\":style.id}},[_vm._v(_vm._s(style.name))])}),0)],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"12\",\"label-cols-lg\":\"8\",\"label\":\"Fire Opacity\",\"label-for\":\"fire_opacity\"}},[_c('b-form-input',{attrs:{\"id\":\"fire_opacity\",\"type\":\"number\",\"value\":\"0.7\",\"step\":\"0.1\",\"disabled\":this.$store.state.fire.selectedFire == null},model:{value:(_vm.fireOpacity),callback:function ($$v) {_vm.fireOpacity=$$v},expression:\"fireOpacity\"}})],1),_c('b-form-group',{attrs:{\"label-cols-sm\":\"12\",\"label-cols-lg\":\"8\",\"label\":\"Smoke Opacity\",\"label-for\":\"smoke_opacity\"}},[_c('b-form-input',{attrs:{\"id\":\"smoke_opacity\",\"type\":\"number\",\"value\":\"0.5\",\"step\":\"0.1\",\"disabled\":this.$store.state.fire.selectedFire == null},model:{value:(_vm.smokeOpacity),callback:function ($$v) {_vm.smokeOpacity=$$v},expression:\"smokeOpacity\"}})],1)],1)],1)],1),_c('br'),_c('br'),_c('br')],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-link-panel\"},[_c('b-form-group',{attrs:{\"label\":\"MATSim Link ID:\",\"label-for\":\"map-link\"}},[_c('b-form-input',{attrs:{\"id\":\"map-link\",\"type\":\"text\",\"placeholder\":\"Please select a MATSim Network Link from the map\",\"readonly\":\"\"},model:{value:(_vm.linkId),callback:function ($$v) {_vm.linkId=$$v},expression:\"linkId\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Disruption Start Time:\",\"label-for\":\"map-link-start\"}},[_c('b-form-input',{attrs:{\"id\":\"map-link-start\",\"type\":\"text\"},model:{value:(_vm.linkStart),callback:function ($$v) {_vm.linkStart=$$v},expression:\"linkStart\"}})],1),_c('button',{staticClass:\"icon\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggle()}}},[_vm._v(\"Save\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"map-link-panel\">\n    <b-form-group label=\"MATSim Link ID:\" label-for=\"map-link\">\n      <b-form-input\n        id=\"map-link\"\n        type=\"text\"\n        v-model=\"linkId\"\n        placeholder=\"Please select a MATSim Network Link from the map\"\n        readonly\n      >\n      </b-form-input>\n    </b-form-group>\n    <b-form-group label=\"Disruption Start Time:\" label-for=\"map-link-start\">\n      <b-form-input id=\"map-link-start\" type=\"text\" v-model=\"linkStart\">\n      </b-form-input>\n    </b-form-group>\n    <button class=\"icon\" type=\"button\" @click=\"toggle()\">Save</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"mapAffectedLink\",\n  props: {\n    linkId: {\n      default: \"\",\n      type: String\n    },\n    linkStart: {\n      default: \"00:00\",\n      type: String\n    }\n  },\n  computed: {\n    isOpen: {\n      get() {\n        return this.$store.state.map.affectedLinkIsOpen;\n      },\n      set(value) {\n        this.$store.commit(\"setAffectedLinkIsOpen\", value);\n      }\n    }\n  },\n  methods: {\n    toggle: function() {\n      this.$store.commit(\n        \"setAffectedLinkIsOpen\",\n        !this.$store.state.map.affectedLinkIsOpen\n      );\n    }\n  }\n};\n</script>\n\n<style>\n.map-overlay {\n  font: bold 12px/20px \"Helvetica Neue\", Arial, Helvetica, sans-serif;\n  position: absolute;\n  width: 40%;\n  top: 10%;\n  right: 30%;\n  height: auto;\n  overflow: auto;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 0 20px 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 5px;\n  z-index: 100;\n}\n\n.map-overlay label {\n  display: block;\n  margin: 10px 0 0 0;\n}\n\n.map-overlay input {\n  display: inline-block;\n  width: 100%;\n  position: relative;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapAffectedLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapAffectedLink.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapAffectedLink.vue?vue&type=template&id=7b5a6668&\"\nimport script from \"./MapAffectedLink.vue?vue&type=script&lang=js&\"\nexport * from \"./MapAffectedLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapAffectedLink.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{staticClass:\"mb-1\",attrs:{\"header\":\"Traffic Behaviour Setup\"}},[_c('b-collapse',{attrs:{\"visible\":\"\",\"id\":\"collapse-traffic\"}},[_c('label',[_vm._v(\"\\n      Maximum speed on roads (as % of speed limits)\\n      \"),_c('span',{staticClass:\"helper-icons\"},[_c('FontAwesomeIcon',{directives:[{name:\"b-popover\",rawName:\"v-b-popover.hover\",value:(_vm.helpText),expression:\"helpText\",modifiers:{\"hover\":true}}],attrs:{\"icon\":\"info-circle\"}})],1)]),_c('div',{staticClass:\"traffic-slider\"},[_c('vue-slider',_vm._b({ref:\"trafficslider\",attrs:{\"interval\":10,\"tooltip\":'always',\"tooltip-formatter\":_vm.valueToPercent,\"marks\":_vm.valueToMark,\"drag-on-click\":true},model:{value:(_vm.trafficSpeed),callback:function ($$v) {_vm.trafficSpeed=$$v},expression:\"trafficSpeed\"}},'vue-slider',_vm.sliderConfig,false))],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-card class=\"mb-1\" header=\"Traffic Behaviour Setup\">\n    <b-collapse visible id=\"collapse-traffic\">\n      <label>\n        Maximum speed on roads (as % of speed limits)\n        <span class=\"helper-icons\">\n          <FontAwesomeIcon icon=\"info-circle\" v-b-popover.hover=\"helpText\" />\n        </span>\n      </label>\n      <div class=\"traffic-slider\">\n        <vue-slider\n          ref=\"trafficslider\"\n          v-bind=\"sliderConfig\"\n          v-model=\"trafficSpeed\"\n          :interval=\"10\"\n          :tooltip=\"'always'\"\n          :tooltip-formatter=\"valueToPercent\"\n          :marks=\"valueToMark\"\n          :drag-on-click=\"true\"\n        >\n        </vue-slider>\n      </div>\n    </b-collapse>\n  </b-card>\n</template>\n\n<script>\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nimport VueSlider from \"vue-slider-component\";\nimport \"vue-slider-component/theme/default.css\";\n\nlibrary.add(faInfoCircle);\n\nexport default {\n  name: \"mapTrafficCard\",\n  components: { VueSlider, FontAwesomeIcon },\n  props: [\"trafficSpeed\", \"helpText\"],\n  data: function() {\n    return {\n      sliderConfig: {\n        min: 0,\n        max: 100,\n        dotStyle: {\n          display: \"none\"\n        }\n      },\n      valueToPercent: val => {\n        return `${val}%`;\n      },\n      valueToMark: val => ({\n        label: val % 100 === 0 ? this.valueToPercent(val) : \"\"\n      })\n    };\n  }\n};\n</script>\n\n<style>\n.traffic-slider {\n  padding: 1.5em 0.5em 0.5em 0.5em;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTrafficBehaviourCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTrafficBehaviourCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapTrafficBehaviourCard.vue?vue&type=template&id=7af1c173&\"\nimport script from \"./MapTrafficBehaviourCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MapTrafficBehaviourCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapTrafficBehaviourCard.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <b-container\n    v-show=\"\n      this.$store.state.map.mapInstance != null &&\n        this.$store.state.map.mapSettingsIsOpen\n    \"\n    fluid\n    class=\"p-0 h-100 mapboxgl-ctrl-top-left map-sidebar-container\"\n  >\n    <b-row no-gutters class=\"h-100\">\n      <b-col sm=\"5\" class=\"h-100 m-0 mapboxgl-ctrl map-sidebar-col\">\n        <div id=\"h-100 nav\">\n          <h5>Emergency Evacuation Simulator</h5>\n          <router-link to=\"/\">Home</router-link> |\n          <router-link to=\"/about\">About</router-link>\n        </div>\n        <b-collapse visible id=\"collapse-side-panel\" class=\"h-100\">\n          <div class=\"h-100 map-accordion-container\">\n            <b-card header=\"Scenario\" class=\"mb-1 p-0\">\n              <b-form-group\n                label-cols-sm=\"12\"\n                label-cols-lg=\"4\"\n                label=\"Region\"\n                label-for=\"map-region\"\n              >\n                <b-form-select id=\"map-region\" v-model=\"selectedRegion\">\n                  <option value=\"no-region\" text=\"no-region\" disabled></option>\n                  <option\n                    v-for=\"(r, id) in regions\"\n                    :key=\"id\"\n                    :value=\"id\"\n                    :disabled=\"selectedRegion == id\"\n                    >{{ r.name }}</option\n                  >\n                </b-form-select>\n              </b-form-group>\n              <b-form-group\n                label-cols-sm=\"12\"\n                label-cols-lg=\"4\"\n                label=\"Population\"\n                label-for=\"map-population\"\n              >\n                <b-form-select id=\"map-population\" v-model=\"selectedPopulation\">\n                  <option\n                    value=\"no-population\"\n                    text=\"no-population\"\n                    disabled\n                  ></option>\n                  <option\n                    v-for=\"(p, id) in popInSelectedRegion\"\n                    :key=\"id\"\n                    :value=\"id\"\n                    :disabled=\"selectedFire == id\"\n                    >{{ p.display_name }}</option\n                  >\n                </b-form-select>\n              </b-form-group>\n            </b-card>\n            <b-card class=\"mb-1\">\n              <template v-slot:header>\n                <h6 class=\"mb-0\">\n                  Emergency Incident\n                  <span class=\"helper-icons\">\n                    <FontAwesomeIcon\n                      icon=\"info-circle\"\n                      v-b-popover.hover=\"helperOptions[0].text\"\n                    />\n                  </span>\n                </h6>\n              </template>\n              <b-collapse visible id=\"collapse-incident\">\n                <b-form inline>\n                  <b-form-select id=\"map-fire\" v-model=\"selectedFire\">\n                    <option value=\"no-fire\" disabled></option>\n                    <option\n                      v-for=\"(f, id) in firesInSelectedRegion\"\n                      :key=\"id\"\n                      :value=\"id\"\n                      :disabled=\"selectedFire == id\"\n                      >{{ f.display_name }}</option\n                    >\n                  </b-form-select>\n                  <b-form-checkbox\n                    class=\"form-check-input\"\n                    v-model=\"showSmoke\"\n                    :disabled=\"this.$store.state.fire.selectedFire == null\"\n                    >Display Embers\n                  </b-form-checkbox>\n                </b-form>\n              </b-collapse>\n            </b-card>\n            <!--<b-card no-body class=\"mb-1\">\n              <b-card-header v-b-toggle.collapse-dest>\n                Destinations and safe lines\n                <span class=\"helper-icons\">\n                  <font-awesome-icon\n                    icon=\"info-circle\"\n                    v-b-popover.hover=\"helperOptions[2].text\"\n                  />\n                </span>\n              </b-card-header>\n              <b-collapse visible id=\"collapse-dest\">\n                <b-row>\n                  <b-col md=\"6\" sm=\"6\" xs=\"6\">\n                    <b-form-select\n                      v-model=\"dest_selected\"\n                      :options=\"dest_options\"\n                      disabled\n                    >\n                    </b-form-select>\n                  </b-col>\n                  <b-col md=\"5\" sm=\"5\" xs=\"5\">\n                    <b-button disabled size=\"sm\" variant=\"success\">\n                      <font-awesome-icon icon=\"plus-circle\" />\n                      Draw safe line\n                    </b-button>\n                  </b-col>\n                </b-row>\n              </b-collapse>\n            </b-card>-->\n            <MapTrafficBehaviourCard\n              :helpText=\"helperOptions[3].text\"\n              :trafficSpeed=\"100\"\n            />\n            <b-card class=\"mb-1\" header=\"UI Settings\">\n              <b-collapse visible id=\"collapse-map-style\">\n                <b-form>\n                  <b-form-group\n                    label-cols-sm=\"12\"\n                    label-cols-lg=\"8\"\n                    label=\"Map Style\"\n                    label-for=\"map-style\"\n                  >\n                    <b-form-select id=\"map-style\" v-model=\"mapboxStyle\">\n                      <option\n                        v-for=\"style in styles\"\n                        :key=\"style.id\"\n                        :value=\"style.id\"\n                        :disabled=\"mapboxStyle.id == style.id\"\n                        >{{ style.name }}</option\n                      >\n                    </b-form-select>\n                  </b-form-group>\n                  <b-form-group\n                    label-cols-sm=\"12\"\n                    label-cols-lg=\"8\"\n                    label=\"Fire Opacity\"\n                    label-for=\"fire_opacity\"\n                  >\n                    <b-form-input\n                      id=\"fire_opacity\"\n                      type=\"number\"\n                      value=\"0.7\"\n                      step=\"0.1\"\n                      v-model=\"fireOpacity\"\n                      :disabled=\"this.$store.state.fire.selectedFire == null\"\n                    />\n                  </b-form-group>\n\n                  <b-form-group\n                    label-cols-sm=\"12\"\n                    label-cols-lg=\"8\"\n                    label=\"Smoke Opacity\"\n                    label-for=\"smoke_opacity\"\n                  >\n                    <b-form-input\n                      id=\"smoke_opacity\"\n                      type=\"number\"\n                      value=\"0.5\"\n                      step=\"0.1\"\n                      v-model=\"smokeOpacity\"\n                      :disabled=\"this.$store.state.fire.selectedFire == null\"\n                    />\n                  </b-form-group>\n                </b-form>\n              </b-collapse>\n            </b-card>\n            <br />\n            <br />\n            <br />\n          </div>\n        </b-collapse>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions } from \"vuex\";\nimport { PHOENIX_SET_OPACITY } from \"@/store/mutation-types\";\nimport { EMBER_SET_OPACITY } from \"@/store/mutation-types\";\nimport { DRAW_SMOKE, CLEAR_SMOKE } from \"@/store/mutation-types\";\nimport MapAffectedLink from \"@/components/MapAffectedLink.vue\";\nimport MapTrafficBehaviourCard from \"@/components/MapTrafficBehaviourCard.vue\";\nimport Vue from \"vue\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faMapMarker,\n  faInfoCircle,\n  faPlusCircle\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nlibrary.add(faMapMarker, faInfoCircle, faPlusCircle);\nVue.config.productionTip = false;\n\nexport default {\n  name: \"mapSetup\",\n  props: {},\n  data: function() {\n    return {\n      isHidden: false,\n      styles: this.$store.state.config.styles,\n      populations: this.$store.state.config.populations,\n      modalShow: false,\n      //incident_selected: [\"fire\"], // Must be an array reference!\n      global: [{ text: \"startHHMM\", value: \"00:00\" }],\n      phoenix: [\n        { text: \"ignitionHHMM\", value: \"00:00\" },\n        {\n          text: \"fireGeoJson\",\n          value: \"scenarios/surf-coast-shire/test-files/scenario_fire.json\"\n        },\n        { text: \"smokeGeoJson\", value: \"\" }\n      ],\n      matsim: [\n        {\n          text: \"outputDir\",\n          value:\n            \"test/output/io/github/agentsoz/ees//TypicalSummerWeekday50kTest/testTypicalSummerWeekday50k/matsim\"\n        },\n        {\n          text: \"configXml\",\n          value:\n            \"scenarios/surf-coast-shire/test-files/scenario_matsim_main.xml\"\n        },\n        { text: \"maxDistanceForFireVisual\", value: \"1000\" },\n        { text: \"maxDistanceForSmokeVisual\", value: \"5000\" },\n        { text: \"fireAvoidanceBufferForVehicles\", value: \"5000\" },\n        { text: \"fireAvoidanceBufferForEmergencyVehicles\", value: \"1000\" },\n        { text: \"congestionEvaluationInterval\", value: \"180\" },\n        { text: \"congestionToleranceThreshold\", value: \"0.33\" },\n        { text: \"congestionReactionProbability\", value: \"0.0\" }\n      ],\n      trafficBehaviour: [\n        { text: \"proportion\", value: \"0.0\" },\n        { text: \"radiusInMtrs\", value: \"0\" }\n      ],\n      dest_selected: null,\n      dest_options: [{ value: null, text: \"Please select an option\" }],\n      helperOptions: [\n        {\n          value: 0,\n          text:\n            \"If the location chosen has fire models, choose which one to use. Select whether to show visually on map.\\nEvacuation can proceed without fire model, in which case No incident should be selected. If a fire model is selected, key attributes are displayed.\"\n        },\n        {\n          value: 1,\n          text:\n            \"Evac start is the time at which evacuation starts (announcement is made).\\nIf there is a fire model, this should be some time after fire ignition attribute of chosen fire.\\nEvac peak is the length of time after the start, at which the largest number of people are starting to leave.\\nEvacuations are dispersed around the peak point.\"\n        },\n        {\n          value: 2,\n          text:\n            \"Potential destinations are indicated in location file. These provide direction of evacuation. If multiple destinations are given, evacuation is split between these (currently an equal split - future work will allow user specification).\\nThe safe line is a line beyond which evacuees can be considered out of danger. Safe lines should be sufficiently long to cut all possible roads that could be used to a given destination. Only one safe line is allowed per destination. To draw line, click start point, release, click end point.\"\n        },\n        {\n          value: 3,\n          text:\n            \"The simulator will modify speeds based on congestion. However in a bushfire additional factors (e.g. smoke) may affect possible speed. This allows that to be specified as a % of the normal speed. The setting will affect all roads in the network, not only those near the fire.\"\n        }\n      ]\n    };\n  },\n  computed: {\n    ...mapState({\n      populationSquares: state => state.map.populationSquares,\n      selectedMATSimLink: state => state.map.selectedMATSimLink\n    }),\n    ...mapGetters([\n      \"regions\",\n      \"selectedStyle\",\n      \"selectedRegion\",\n      \"popInSelectedRegion\",\n      \"selectedFire\"\n    ]),\n    firesInSelectedRegion() {\n      return !this.$store.getters.firesInSelectedRegion\n        ? []\n        : this.$store.getters.firesInSelectedRegion;\n    },\n    mapboxStyle: {\n      get() {\n        return this.$store.state.map.mapboxStyle;\n      },\n      set(value) {\n        this.changeMapboxStyle(value);\n      }\n    },\n    selectedRegion: {\n      get() {\n        return !this.$store.state.map.selectedRegion\n          ? \"no-region\"\n          : this.$store.state.map.selectedRegion;\n      },\n      set(value) {\n        // set the selected region in state\n        this.selectRegion(value);\n      }\n    },\n    selectedPopulation: {\n      get() {\n        return !this.$store.state.population.selectedPopulation\n          ? \"no-population\"\n          : this.$store.state.population.selectedPopulation;\n      },\n      set(value) {\n        this.selectPopulation(value);\n      }\n    },\n    selectedFire: {\n      get() {\n        return !this.$store.state.fire.selectedFire\n          ? \"no-fire\"\n          : this.$store.state.fire.selectedFire;\n      },\n      set(value) {\n        this.selectFire(value);\n      }\n    },\n    selectedIncident: {\n      get() {\n        return [\"fire\"];\n      }\n    },\n    showSmoke: {\n      get() {\n        return this.$store.state.smoke.smokeVisible;\n      },\n      set(value) {\n        // make smoke visible\n        this.$store.commit(DRAW_SMOKE, value);\n        if (value) {\n          // reload any layers to apply this change\n          this.$store.dispatch(\"drawSmoke\");\n        } else {\n          // remove smoke\n          this.$store.commit(CLEAR_SMOKE, this.$store.state.map.mapInstance);\n        }\n      }\n    },\n    fireOpacity: {\n      get() {\n        return this.$store.state.fire.fireOpacity;\n      },\n      set(value) {\n        var decimal = /^[-+]?[0-9]+\\.[0-9]+$/;\n        if (!value.match(decimal)) return;\n\n        this.$store.commit(PHOENIX_SET_OPACITY, parseFloat(value));\n        this.$store.dispatch(\"resetFireLayers\");\n      }\n    },\n    smokeOpacity: {\n      get() {\n        return this.$store.state.smoke.smokeOpacity;\n      },\n      set(value) {\n        var decimal = /^[-+]?[0-9]+\\.[0-9]+$/;\n        if (!value.match(decimal)) return;\n\n        this.$store.commit(EMBER_SET_OPACITY, parseFloat(value));\n        this.$store.dispatch(\"resetFireLayers\");\n      }\n    }\n  },\n\n  components: {\n    mapAffectedLink: MapAffectedLink,\n    MapTrafficBehaviourCard,\n    FontAwesomeIcon\n  },\n  methods: {\n    ...mapActions([\n      \"selectRegion\",\n      \"changeMapboxStyle\",\n      \"selectFire\",\n      \"selectPopulation\"\n    ]),\n    setStyle: function(event) {\n      this.changeMapboxStyle(event.target.dataset.mapStyle);\n    },\n    setRegion: function(event) {\n      // set the selected region in state\n      this.selectRegion(event.target.dataset.region);\n    },\n    drawRectangle() {\n      this.$store.commit(\"drawPopulationSquare\");\n    },\n    toggle() {\n      this.isHidden = !this.isHidden;\n    },\n    changeTime(val) {\n      if (val.length == 4) {\n        if (val.charAt(2) == \":\") {\n          var temp = new Array();\n          temp = val.split(\":\");\n          if (temp[0] <= 12) {\n            if (temp[1] <= 59) {\n              this.evac_time = temp[0] + \":\" + temp[1];\n            }\n          }\n        }\n      } else {\n        this.evac_time = \"0:00\";\n      }\n    }\n  }\n};\n</script>\n\n<style>\n#nav {\n  width: 100%;\n  position: absolute;\n  left: 0;\n}\n.map-sidebar-container {\n}\n.map-sidebar-container .card-body {\n  padding: 1em;\n}\n.map-accordion-container {\n  text-align: left;\n  padding: 20px;\n}\n.map-sidebar-container .map-sidebar-col {\n  background-color: rgba(255, 255, 255, 0.8);\n  overflow-y: auto;\n}\n.helper-icons {\n  position: relative;\n  left: 5px;\n}\n.custom-select {\n  width: 50% @important;\n}\n.vue-slide-bar-component[data-v-68863e48] {\n  padding-left: 5% !important;\n  padding-right: 5% !important;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSetup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSetup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapSetup.vue?vue&type=template&id=f70c7630&\"\nimport script from \"./MapSetup.vue?vue&type=script&lang=js&\"\nexport * from \"./MapSetup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapSetup.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-settings-container\",on:{\"!keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.toggle()}}},[_c('div',{staticClass:\"map-settings-button-container mapboxgl-ctrl-top-right\"},[_c('div',{staticClass:\"mapboxgl-ctrl mapboxgl-ctrl-group\"},[_c('button',{staticClass:\"icon sprocket\",attrs:{\"type\":\"button\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.toggle()},\"click\":function($event){return _vm.toggle()}}})]),_c('div',{staticClass:\"mapboxgl-ctrl mapboxgl-ctrl-group\"},[_c('button',{staticClass:\"icon grid\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.drawRectangle()}}})]),_c('div',{staticClass:\"mapboxgl-ctrl mapboxgl-ctrl-group\"},[_c('button',{class:{ 'font-weight-bold': _vm.renderFireIn3D },attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleFireIn3D()}}},[_vm._v(\"\\n        3D\\n      \")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n        this.$store.state.map.selectedMATSimLink != '' ||\n          this.showDisruptionWindow\n      ),expression:\"\\n        this.$store.state.map.selectedMATSimLink != '' ||\\n          this.showDisruptionWindow\\n      \"}],staticClass:\"mapboxgl-ctrl mapboxgl-ctrl-group\"},[_c('button',{staticClass:\"icon bug\",style:(this.showDisruptionWindow ? 'background-color: lightskyblue;' : ''),attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showDisruptionWindow = !_vm.showDisruptionWindow}}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"map-overlay\"},[_c('div',{staticClass:\"map-settings-panel\",on:{\"!keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.toggle()}}},[_c('h3',[_vm._v(\"Map Settings\")]),_c('label',{attrs:{\"for\":\"map-style\"}},[_vm._v(\"Map Style:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mapboxStyle),expression:\"mapboxStyle\"}],attrs:{\"id\":\"map-style\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.mapboxStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.styles),function(style){return _c('option',{key:style.id,attrs:{\"disabled\":_vm.mapboxStyle == style.id},domProps:{\"value\":style.id}},[_vm._v(\"\\n          \"+_vm._s(style.name)+\"\\n        \")])}),0),_c('label',{attrs:{\"for\":\"map-region\"}},[_vm._v(\"Region:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedRegion),expression:\"selectedRegion\"}],attrs:{\"id\":\"map-region\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedRegion=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"no-region\",\"disabled\":\"\"}}),_vm._l((_vm.regions),function(region){return _c('option',{key:region.id,attrs:{\"disabled\":_vm.selectedRegion == region.id},domProps:{\"value\":region.id}},[_vm._v(\"\\n          \"+_vm._s(region.name)+\"\\n        \")])})],2),_c('label',{attrs:{\"for\":\"map-fire\"}},[_vm._v(\"Emergency Incident:\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedFire),expression:\"selectedFire\"}],attrs:{\"id\":\"map-fire\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedFire=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"no-fire\",\"disabled\":\"\"}}),_vm._l((_vm.firesInSelectedRegion),function(fire){return _c('option',{key:fire.id,attrs:{\"disabled\":_vm.selectedFire == fire.id},domProps:{\"value\":fire.id}},[_vm._v(\"\\n          \"+_vm._s(fire.name)+\"\\n        \")])})],2),_c('label',{attrs:{\"for\":\"map-fire-opacity\"}},[_vm._v(\"Fire Opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fireOpacity),expression:\"fireOpacity\"}],attrs:{\"id\":\"map-fire-opacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.fireOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.fireOpacity=$event.target.value}}}),_c('label',{attrs:{\"for\":\"map-smoke-opacity\"}},[_vm._v(\"Show Smoke:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showSmoke),expression:\"showSmoke\"}],attrs:{\"id\":\"map-smoke-opacity\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.showSmoke)?_vm._i(_vm.showSmoke,null)>-1:(_vm.showSmoke)},on:{\"change\":function($event){var $$a=_vm.showSmoke,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showSmoke=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showSmoke=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showSmoke=$$c}}}}),_c('label',{attrs:{\"for\":\"map-smoke-opacity\"}},[_vm._v(\"Smoke Opacity:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.smokeOpacity),expression:\"smokeOpacity\"}],attrs:{\"id\":\"map-smoke-opacity\",\"type\":\"number\",\"min\":\"0\",\"max\":\"1\",\"step\":\"0.01\",\"disabled\":!_vm.showSmoke},domProps:{\"value\":(_vm.smokeOpacity)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.smokeOpacity=$event.target.value}}}),_c('br'),_c('br'),_c('button',{staticClass:\"btn btn-success\",staticStyle:{\"width\":\"100% !important\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.toggle()},\"click\":function($event){return _vm.toggle()}}},[_vm._v(\"\\n        Done\\n      \")])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDisruptionWindow),expression:\"showDisruptionWindow\"}],staticClass:\"map-overlay\"},[(!_vm.isLinkDisrupted())?_c('div',{staticClass:\"save-simulation-panel\"},[_c('h3',[_vm._v(\"Disruption\")]),_c('label',{staticClass:\"form-label\",attrs:{\"id\":\"status1\"}},[_vm._v(\"Description\")]),_c('input',{ref:\"description\",attrs:{\"id\":\"simulation-name\",\"placeholder\":\"\",\"type\":\"text\"}}),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"}),_c('div',{staticClass:\"col\"},[_vm._v(\"\\n            Start Time\\n            \"),_c('input',{ref:\"startTime\",staticClass:\"form-control\",attrs:{\"type\":\"time\",\"value\":\"00:00:00\",\"id\":\"example-time-input\"}})]),_c('div',{staticClass:\"col\"},[_vm._v(\"\\n            End Time\\n            \"),_c('input',{ref:\"endTime\",staticClass:\"form-control\",attrs:{\"type\":\"time\",\"value\":\"00:00:00\",\"id\":\"example-time-input\"}})]),_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n            Speed\\n            \"),_c('div',{staticClass:\"input-group\"},[_c('input',{ref:\"speed\",staticClass:\"form-control\",staticStyle:{\"text-align\":\"right\"},attrs:{\"type\":\"number\",\"placeholder\":\"Speed\",\"aria-label\":\"Recipient's username\",\"aria-describedby\":\"basic-addon2\"}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{class:!_vm.absoluteSpeed ? 'btn btn-secondary' : 'btn btn-primary',attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.absoluteSpeed = true}}},[_vm._v(\"\\n                  KM/H\\n                \")]),_c('button',{class:_vm.absoluteSpeed ? 'btn btn-secondary' : 'btn btn-primary',attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.absoluteSpeed = false}}},[_vm._v(\"\\n                  %\\n                \")])])])]),_c('div',{staticClass:\"col\"})])]),_c('label',{staticClass:\"form-label\",attrs:{\"id\":\"status1\"}},[_vm._v(\"Affected Links\")]),_c('input',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"id\":\"simulation-name\",\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":this.$store.state.map.selectedMATSimLink}}),(this.$store.state.map.selectedMATSimLink != '')?_c('button',{staticClass:\"btn btn-success\",staticStyle:{\"width\":\"100% !important\"},on:{\"click\":function($event){return _vm.saveDisruption()}}},[_vm._v(\"\\n        Save\\n      \")]):_c('button',{staticClass:\"btn btn-success\",staticStyle:{\"width\":\"100% !important\"},attrs:{\"disabled\":\"\"},on:{\"click\":function($event){return _vm.saveDisruption()}}},[_vm._v(\"\\n        Save\\n      \")])]):_c('div',{staticClass:\"save-simulation-panel\"},[_c('h3',[_vm._v(\"Disruption\")]),_c('button',{staticClass:\"btn btn-danger\",staticStyle:{\"width\":\"100% !important\"},on:{\"click\":function($event){return _vm.deleteDisruption()}}},[_vm._v(\"\\n        Delete\\n      \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"map-settings-container\" v-on:keydown.esc.capture=\"toggle()\">\n    <div class=\"map-settings-button-container mapboxgl-ctrl-top-right\">\n      <div class=\"mapboxgl-ctrl mapboxgl-ctrl-group\">\n        <button\n          class=\"icon sprocket\"\n          type=\"button\"\n          v-on:keydown.esc=\"toggle()\"\n          @click=\"toggle()\"\n        ></button>\n      </div>\n      <div class=\"mapboxgl-ctrl mapboxgl-ctrl-group\">\n        <button\n          class=\"icon grid\"\n          type=\"button\"\n          @click=\"drawRectangle()\"\n        ></button>\n      </div>\n      <div class=\"mapboxgl-ctrl mapboxgl-ctrl-group\">\n        <button\n          :class=\"{ 'font-weight-bold': renderFireIn3D }\"\n          type=\"button\"\n          @click=\"toggleFireIn3D()\"\n        >\n          3D\n        </button>\n      </div>\n      <div\n        class=\"mapboxgl-ctrl mapboxgl-ctrl-group\"\n        v-show=\"\n          this.$store.state.map.selectedMATSimLink != '' ||\n            this.showDisruptionWindow\n        \"\n      >\n        <button\n          class=\"icon bug\"\n          type=\"button\"\n          @click=\"showDisruptionWindow = !showDisruptionWindow\"\n          :style=\"\n            this.showDisruptionWindow ? 'background-color: lightskyblue;' : ''\n          \"\n        ></button>\n      </div>\n    </div>\n\n    <div class=\"map-overlay\" v-show=\"false\">\n      <div class=\"map-settings-panel\" v-on:keydown.esc.capture=\"toggle()\">\n        <h3>Map Settings</h3>\n        <label for=\"map-style\">Map Style:</label>\n        <select id=\"map-style\" v-model=\"mapboxStyle\">\n          <option\n            v-for=\"style in styles\"\n            :key=\"style.id\"\n            :value=\"style.id\"\n            :disabled=\"mapboxStyle == style.id\"\n          >\n            {{ style.name }}\n          </option>\n        </select>\n        <label for=\"map-region\">Region:</label>\n        <select id=\"map-region\" v-model=\"selectedRegion\">\n          <option value=\"no-region\" disabled></option>\n          <option\n            v-for=\"region in regions\"\n            :key=\"region.id\"\n            :value=\"region.id\"\n            :disabled=\"selectedRegion == region.id\"\n          >\n            {{ region.name }}\n          </option>\n        </select>\n        <label for=\"map-fire\">Emergency Incident:</label>\n        <select id=\"map-fire\" v-model=\"selectedFire\">\n          <option value=\"no-fire\" disabled></option>\n          <option\n            v-for=\"fire in firesInSelectedRegion\"\n            :key=\"fire.id\"\n            :value=\"fire.id\"\n            :disabled=\"selectedFire == fire.id\"\n          >\n            {{ fire.name }}\n          </option>\n        </select>\n        <label for=\"map-fire-opacity\">Fire Opacity:</label>\n        <input\n          id=\"map-fire-opacity\"\n          type=\"number\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-model=\"fireOpacity\"\n        />\n        <label for=\"map-smoke-opacity\">Show Smoke:</label>\n        <input id=\"map-smoke-opacity\" type=\"checkbox\" v-model=\"showSmoke\" />\n        <label for=\"map-smoke-opacity\">Smoke Opacity:</label>\n        <input\n          id=\"map-smoke-opacity\"\n          type=\"number\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.01\"\n          v-model=\"smokeOpacity\"\n          :disabled=\"!showSmoke\"\n        />\n        <br />\n        <br />\n        <button\n          style=\"width: 100% !important\"\n          class=\"btn btn-success\"\n          v-on:keydown.esc=\"toggle()\"\n          @click=\"toggle()\"\n        >\n          Done\n        </button>\n      </div>\n    </div>\n    <div class=\"map-overlay\" v-show=\"showDisruptionWindow\">\n      <div v-if=\"!isLinkDisrupted()\" class=\"save-simulation-panel\">\n        <h3>Disruption</h3>\n\n        <label id=\"status1\" class=\"form-label\">Description</label>\n        <input ref=\"description\" id=\"simulation-name\" placeholder type=\"text\" />\n\n        <div class=\"container\">\n          <div class=\"row\">\n            <div class=\"col\" />\n            <div class=\"col\">\n              Start Time\n              <input\n                ref=\"startTime\"\n                class=\"form-control\"\n                type=\"time\"\n                value=\"00:00:00\"\n                id=\"example-time-input\"\n              />\n            </div>\n            <div class=\"col\">\n              End Time\n              <input\n                ref=\"endTime\"\n                class=\"form-control\"\n                type=\"time\"\n                value=\"00:00:00\"\n                id=\"example-time-input\"\n              />\n            </div>\n            <div class=\"col-4\">\n              Speed\n              <div class=\"input-group\">\n                <input\n                  ref=\"speed\"\n                  style=\"text-align: right;\"\n                  type=\"number\"\n                  class=\"form-control\"\n                  placeholder=\"Speed\"\n                  aria-label=\"Recipient's username\"\n                  aria-describedby=\"basic-addon2\"\n                />\n                <div class=\"input-group-append\">\n                  <button\n                    :class=\"\n                      !absoluteSpeed ? 'btn btn-secondary' : 'btn btn-primary'\n                    \"\n                    type=\"button\"\n                    @click=\"absoluteSpeed = true\"\n                  >\n                    KM/H\n                  </button>\n                  <button\n                    :class=\"\n                      absoluteSpeed ? 'btn btn-secondary' : 'btn btn-primary'\n                    \"\n                    type=\"button\"\n                    @click=\"absoluteSpeed = false\"\n                  >\n                    %\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"col\" />\n          </div>\n        </div>\n\n        <label id=\"status1\" class=\"form-label\">Affected Links</label>\n        <input\n          id=\"simulation-name\"\n          type=\"text\"\n          :value=\"this.$store.state.map.selectedMATSimLink\"\n          style=\"margin-bottom: 10px;\"\n          disabled\n        />\n        <button\n          v-if=\"this.$store.state.map.selectedMATSimLink != ''\"\n          style=\"width: 100% !important\"\n          class=\"btn btn-success\"\n          @click=\"saveDisruption()\"\n        >\n          Save\n        </button>\n        <button\n          v-else\n          style=\"width: 100% !important\"\n          class=\"btn btn-success\"\n          disabled\n          @click=\"saveDisruption()\"\n        >\n          Save\n        </button>\n      </div>\n      <div v-else class=\"save-simulation-panel\">\n        <h3>Disruption</h3>\n        <button\n          style=\"width: 100% !important\"\n          class=\"btn btn-danger\"\n          @click=\"deleteDisruption()\"\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport {\n  PHOENIX_SET_OPACITY,\n  EMBER_SET_OPACITY,\n  DRAW_SMOKE,\n  CLEAR_SMOKE,\n  MATSIM_ADD_DISRUPTION,\n  MATSIM_DESELECT_LINK\n} from \"@/store/mutation-types\";\n\nexport default {\n  name: \"mapSettings\",\n  props: {},\n  data: function() {\n    return {\n      absoluteSpeed: true,\n      showDisruptionWindow: false,\n      styles: this.$store.state.config.styles,\n      regions: this.$store.state.config.regions\n    };\n  },\n  computed: {\n    isOpen: {\n      get() {\n        return this.$store.state.map.mapSettingsIsOpen;\n      },\n      set(value) {\n        this.$store.commit(\"mapSettingsIsOpen\", value);\n      }\n    },\n    firesInSelectedRegion() {\n      return this.$store.getters.firesInSelectedRegion;\n    },\n    mapboxStyle: {\n      get() {\n        return this.$store.state.map.mapboxStyle;\n      },\n      set(value) {\n        this.toggle();\n        this.changeMapboxStyle(value);\n      }\n    },\n    selectedRegion: {\n      get() {\n        return !this.$store.state.map.selectedRegion\n          ? \"no-region\"\n          : this.$store.state.map.selectedRegion;\n      },\n      set(value) {\n        // close this settings window\n        this.toggle();\n        // set the selected region in state\n        this.selectRegion(value);\n      }\n    },\n    selectedFire: {\n      get() {\n        return this.$store.state.fire.selectedFire;\n      },\n      set(value) {\n        this.toggle();\n        this.selectFire(value);\n      }\n    },\n    fireOpacity: {\n      get() {\n        return this.$store.state.fire.fireOpacity;\n      },\n      set(value) {\n        var decimal = /^[-+]?[0-9]+\\.[0-9]+$/;\n        if (!value.match(decimal)) return;\n\n        this.$store.commit(PHOENIX_SET_OPACITY, parseFloat(value));\n        this.$store.dispatch(\"resetFireLayers\");\n      }\n    },\n    smokeOpacity: {\n      get() {\n        return this.$store.state.smoke.smokeOpacity;\n      },\n      set(value) {\n        var decimal = /^[-+]?[0-9]+\\.[0-9]+$/;\n        if (!value.match(decimal)) return;\n\n        this.$store.commit(EMBER_SET_OPACITY, parseFloat(value));\n        this.$store.dispatch(\"resetFireLayers\");\n      }\n    },\n    showSmoke: {\n      get() {\n        return this.$store.state.smoke.smokeVisible;\n      },\n      set(value) {\n        // make smoke visible\n        this.$store.commit(DRAW_SMOKE, value);\n        if (value) {\n          // reload any layers to apply this change\n          this.$store.dispatch(\"drawSmoke\");\n        } else {\n          // remove smoke\n          this.$store.commit(CLEAR_SMOKE, this.$store.state.map.mapInstance);\n        }\n      }\n    },\n    renderFireIn3D: {\n      get() {\n        return this.$store.state.fire.fire3DFlameHeight;\n      }\n    }\n  },\n  methods: {\n    ...mapActions({\n      toggleFireIn3D: \"toggleFireIn3D\",\n      toggle: \"toggleSettingsVis\",\n      changeMapboxStyle: \"changeMapboxStyle\",\n      selectRegion: \"selectRegion\",\n      selectFire: \"selectFire\"\n    }),\n    drawRectangle() {\n      this.$store.commit(\"drawPopulationSquare\");\n    },\n    saveDisruption() {\n      var store = this.$store;\n      var mapInstance = store.state.map.mapInstance;\n\n      var disruption = {\n        affectedLinks: store.state.map.selectedMATSimLink,\n        start: this.$refs.startTime.value,\n        end: this.$refs.endTime.value,\n        description: this.$refs.description.value,\n        speed: this.$refs.speed.value,\n        absoluteSpeed: this.absoluteSpeed\n      };\n\n      var filter = [\"in\", \"ID\"];\n\n      //Add disruption to store\n      store.commit(MATSIM_ADD_DISRUPTION, disruption);\n\n      //Add each disrupted link to filter to display on disruption layer.\n      store.state.map.disruptions.forEach(disruption => {\n        disruption.affectedLinks.forEach(link => {\n          filter.push(link);\n        });\n      });\n\n      //render layer\n      mapInstance.setFilter(store.state.map.disruptionMATSimLayer, filter);\n      this.showDisruptionWindow = false;\n      store.state.map.selectedMATSimLink = \"\";\n    },\n    isLinkDisrupted() {\n      var selectedLink = this.$store.state.map.selectedMATSimLink;\n      var disruptions = this.$store.state.map.disruptions;\n      var result = false;\n      disruptions.forEach(disruption => {\n        disruption.affectedLinks.forEach(link => {\n          if (link == selectedLink) {\n            result = true;\n          }\n        });\n      });\n      return result;\n    },\n    deleteDisruption() {\n      var selectedLink = this.$store.state.map.selectedMATSimLink;\n      var disruptions = this.$store.state.map.disruptions;\n      var store = this.$store;\n      var filter = [\"in\", \"ID\"];\n\n      this.showDisruptionWindow = false;\n\n      disruptions.forEach(function(disruption, i) {\n        disruption.affectedLinks.forEach(link => {\n          if (link == selectedLink) {\n            delete disruptions[i];\n          }\n        });\n      });\n\n      store.state.map.mapInstance.setFilter(\n        store.state.map.selectedDisruptionMATSimLayer,\n        filter\n      );\n\n      // this.showDisruptionWindow = false;\n\n      // Add each disrupted link to filter to display on disruption layer.\n      disruptions.forEach(disruption => {\n        disruption.affectedLinks.forEach(link => {\n          filter.push(link);\n        });\n      });\n      //render layer\n      store.state.map.mapInstance.setFilter(\n        store.state.map.disruptionMATSimLayer,\n        filter\n      );\n      store.commit(MATSIM_DESELECT_LINK, null);\n    }\n  }\n};\n</script>\n\n<style>\n.map-settings-panel {\n  padding-left: 10%;\n  padding-right: 10%;\n}\n\n.map-settings-panel select,\n.map-settings-panel select option,\n.map-settings-panel input {\n  text-align: center;\n  width: 100% !important;\n}\n\n.map-settings-panel select,\n.map-settings-panel option {\n  padding: 10px !important;\n  text-align: center !important;\n}\n\n.map-settings-button-container {\n  padding-top: 150px;\n}\n\n.map-overlay {\n  font: bold 12px/20px \"Helvetica Neue\", Arial, Helvetica, sans-serif;\n  position: absolute;\n  width: 40%;\n  top: 10%;\n  right: 30%;\n  height: auto;\n  overflow: auto;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 0 20px 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 5px;\n  z-index: 100;\n}\n\n.map-overlay label,\n.map-overlay h3 {\n  display: block;\n  margin: 10px 0 0 0;\n}\n\n.map-overlay input {\n  display: inline-block;\n  width: 80%;\n  position: relative;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MapSettings.vue?vue&type=template&id=308db0bf&\"\nimport script from \"./MapSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./MapSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MapSettings.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"save-map-settings-container\"},[_c('b-button',{attrs:{\"variant\":\"outline-primary\",\"id\":\"save-map-settings-toggle\"},on:{\"click\":_vm.SaveSimulationToggle}},[_vm._v(\"Save\")]),_c('b-button',{attrs:{\"variant\":\"outline-primary\",\"id\":\"create-simulation\"}},[_vm._v(\"Create\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.simSettingsIsOpen),expression:\"simSettingsIsOpen\"}],staticClass:\"map-overlay\"},[_c('div',{staticClass:\"save-simulation-panel\"},[_c('label',{attrs:{\"for\":\"simulation-name\"}},[_vm._v(\"Simulation Name:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.simulationName),expression:\"simulationName\"}],attrs:{\"id\":\"simulation-name\",\"type\":\"text\"},domProps:{\"value\":(_vm.simulationName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.simulationName=$event.target.value}}}),_c('b-button',{attrs:{\"variant\":\"outline-primary\",\"id\":\"save-map-settings\"},on:{\"click\":_vm.SaveSimulationConfig}},[_vm._v(\"Save\")]),_c('b-button',{attrs:{\"variant\":\"outline-primary\",\"id\":\"cancel-map-settings\"},on:{\"click\":_vm.SaveSimulationToggle}},[_vm._v(\"Cancel\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"save-map-settings-container\">\n    <b-button\n      variant=\"outline-primary\"\n      id=\"save-map-settings-toggle\"\n      v-on:click=\"SaveSimulationToggle\"\n      >Save</b-button\n    >\n    <b-button variant=\"outline-primary\" id=\"create-simulation\">Create</b-button>\n\n    <div class=\"map-overlay\" v-show=\"simSettingsIsOpen\">\n      <div class=\"save-simulation-panel\">\n        <label for=\"simulation-name\">Simulation Name:</label>\n        <input id=\"simulation-name\" type=\"text\" v-model=\"simulationName\" />\n        <b-button\n          variant=\"outline-primary\"\n          id=\"save-map-settings\"\n          v-on:click=\"SaveSimulationConfig\"\n          >Save</b-button\n        >\n        <b-button\n          variant=\"outline-primary\"\n          id=\"cancel-map-settings\"\n          v-on:click=\"SaveSimulationToggle\"\n          >Cancel</b-button\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from \"vuex\";\nimport {\n  MATSIM_SAVE_CONFIG,\n  MATSIM_SETTINGS_VIS\n} from \"@/store/mutation-types\";\n\nexport default {\n  name: \"saveSettings\",\n  props: {\n    toggle: {\n      default: false,\n      type: Boolean\n    }\n  },\n  data: function() {\n    return {};\n  },\n  computed: {\n    ...mapState({\n      simSettingsIsOpen: state => state.simulation.simSettingsIsOpen\n    }),\n    ...mapGetters([\"selectedRegion\", \"selectedFire\"]),\n    simulationName: {\n      get() {\n        return this.$store.state.simulation.simulationName;\n      },\n      set(value) {\n        this.$store.commit(\"setSimulationName\", value);\n      }\n    }\n  },\n  methods: {\n    SaveSimulationToggle() {\n      this.$store.commit(MATSIM_SETTINGS_VIS, !this.saveSimIsOpen);\n    },\n    SaveSimulationConfig() {\n      var outputTemplate = {\n        simulationName: this.simulationName,\n        config: {\n          ees: [\n            {\n              global: [\n                {\n                  randomSeed: \"1234\",\n                  crs: \"EPSG:28355\",\n                  startHHMM: \"00:00\"\n                }\n              ],\n\n              bdi: [\n                {\n                  jPlanSelectionPolicy: \"FIRST\",\n                  jAgents: \"\",\n                  jLogLevel: \"WARN\",\n                  jLogFile:\n                    \"test/output/io/github/agentsoz/ees/TypicalSummerWeekday50kTest/testTypicalSummerWeekday50k/jill.log\",\n                  jOutFile:\n                    \"test/output/io/github/agentsoz/ees//TypicalSummerWeekday50kTest/testTypicalSummerWeekday50k/jill.out\"\n                }\n              ],\n\n              matsim: [\n                {\n                  outputDir:\n                    \"test/output/io/github/agentsoz/ees//TypicalSummerWeekday50kTest/testTypicalSummerWeekday50k/matsim\",\n                  configXml:\n                    \"scenarios/surf-coast-shire/typical-summer-weekday-50k/scenario_matsim_main.xml\",\n                  maxDistanceForFireVisual: \"1000\",\n                  maxDistanceForSmokeVisual: \"5000\",\n                  fireAvoidanceBufferForVehicles: \"5000\",\n                  fireAvoidanceBufferForEmergencyVehicles: \"1000\",\n                  congestionEvaluationInterval: \"180\",\n                  congestionToleranceThreshold: \"0.33\",\n                  congestionReactionProbability: \"0.0\"\n                }\n              ],\n\n              phoenix: [\n                {\n                  ignitionHHMM: \"00:00\",\n                  fireGeoJson: this.selectedFire.geojson,\n                  smokeGeoJson: \"\"\n                }\n              ],\n\n              disruption: [\n                {\n                  fileJson:\n                    \"scenarios/surf-coast-shire/typical-summer-weekday-50k/scenario_disruptions.json\"\n                }\n              ],\n\n              messaging: [\n                {\n                  fileJson:\n                    \"scenarios/surf-coast-shire/typical-summer-weekday-50k/scenario_messages.json\"\n                }\n              ]\n            }\n          ],\n          scenario_main: [\n            {\n              matsimfile:\n                \"scenarios/surf-coast-shire/typical-summer-weekday-50k/scenario_matsim_main.xml\",\n\n              firefile: [\n                {\n                  name: \"\",\n                  coordinates: \"\",\n                  format: \"\"\n                }\n              ],\n\n              geographyfile: [\n                {\n                  geo_name:\n                    \"scenarios/surf-coast-shire/typical-summer-weekday-50k/scenario_geography.xml\"\n                }\n              ],\n\n              trafficBehaviour: [\n                {\n                  proportion: \"0.0\",\n                  radiusInMtrs: \"0\"\n                }\n              ],\n\n              evacuationTiming: [\n                {\n                  start: \"00:00\",\n                  peak: \"00\"\n                }\n              ],\n\n              bdiagents: \"bdiagents\"\n            }\n          ]\n        }\n      };\n\n      this.$store.commit(\n        MATSIM_SAVE_CONFIG,\n        outputTemplate,\n        this.simulationName\n      );\n\n      this.SaveSimulationToggle();\n    }\n  }\n};\n</script>\n\n<style>\n#save-map-settings-toggle {\n  position: absolute;\n  top: 10px;\n  overflow: visible;\n  margin: 0 0 0 -80px;\n}\n\n#create-simulation {\n  position: absolute;\n  top: 10px;\n  overflow: visible;\n  margin: 0 0 0 0;\n}\n\n.map-overlay {\n  font: bold 12px/20px \"Helvetica Neue\", Arial, Helvetica, sans-serif;\n  position: absolute;\n  width: 40%;\n  top: 10%;\n  right: 30%;\n  height: auto;\n  overflow: auto;\n  background-color: rgba(255, 255, 255, 0.7);\n  padding: 0 0 20px 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 5px;\n  z-index: 100;\n}\n\n.map-overlay label {\n  display: block;\n  margin: 10px 0 0 0;\n}\n\n.map-overlay input {\n  display: inline-block;\n  width: 100%;\n  position: relative;\n  margin: 0;\n}\n\n#save-map-settings {\n  margin: 10px 0 0 0;\n}\n\n#cancel-map-settings {\n  margin: 10px 0 0 20px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SaveSettings.vue?vue&type=template&id=e4a674d6&\"\nimport script from \"./SaveSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./SaveSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SaveSettings.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div v-on:keydown.esc.capture=\"toggleSettingsVis()\">\n    <maplayer />\n    <slider />\n    <spinner />\n    <population />\n    <setup />\n    <settings />\n    <savesettings />\n  </div>\n</template>\n\n<script>\nimport MapComponent from \"@/components/Map.vue\";\nimport MapTimeSlider from \"@/components/MapTimeSlider.vue\";\nimport MapSquarePopulation from \"@/components/MapSquarePopulation.vue\";\nimport MapLoadSpinner from \"@/components/MapLoadSpinner.vue\";\nimport MapSetup from \"@/components/MapSetup.vue\";\nimport MapSettings from \"@/components/MapSettings.vue\";\nimport SaveSettings from \"@/components/SaveSettings.vue\";\n\nimport { mapActions } from \"vuex\";\n\nexport default {\n  name: \"home\",\n  components: {\n    maplayer: MapComponent,\n    slider: MapTimeSlider,\n    spinner: MapLoadSpinner,\n    population: MapSquarePopulation,\n    setup: MapSetup,\n    settings: MapSettings,\n    savesettings: SaveSettings\n  },\n  methods: {\n    ...mapActions([\"toggleSettingsVis\"])\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=646ede79&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport Home from \"./views/Home.vue\";\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: \"/\",\n      name: \"home\",\n      component: Home\n    },\n    {\n      path: \"/about\",\n      name: \"about\",\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () =>\n        import(/* webpackChunkName: \"about\" */ \"./views/About.vue\")\n    }\n  ]\n});\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\n\nimport BootstrapVue from \"bootstrap-vue\";\nVue.use(BootstrapVue);\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n\nimport VueMq from \"vue-mq\";\nVue.use(VueMq);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  el: \"#app\",\n  router,\n  store,\n  render: h => h(App),\n  mounted: function() {\n    this.$store.dispatch(\n      \"getConfig\",\n      process.env.VUE_APP_EES_TILES_API + \"/config\"\n    );\n  }\n}).$mount(\"#app\");\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTrafficBehaviourCard.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapTrafficBehaviourCard.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=7f1ee154&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=7f1ee154&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveSettings.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SaveSettings.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSquarePopulation.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSquarePopulation.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSetup.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MapSetup.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}